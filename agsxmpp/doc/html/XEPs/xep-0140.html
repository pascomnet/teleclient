<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0140: Shared Groups</title><link rel="stylesheet" type="text/css" href="/xmpp.css" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><meta name="DC.Title" content="Shared Groups" /><meta name="DC.Creator" content="Peter Saint-Andre" /><meta name="DC.Description" content="This document defines a protocol profile for centrally defined and administered roster groups; the protocol described herein has been retracted in favor of XEP-0144: Roster Item Exchange." /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2004-10-27" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0140" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright (c) 1999 - 2008 by the XMPP Standards Foundation (XSF)." /></head><body><h1>XEP-0140: Shared Groups</h1><p>This document defines a protocol profile for centrally defined and administered roster groups; the protocol described herein has been retracted in favor of XEP-0144: Roster Item Exchange.</p><hr /><p style="color:red">WARNING: This document has been retracted by the author(s). Implementation of the protocol described herein is not recommended. Developers desiring similar functionality should implement the protocol that supersedes this one (if any).</p><hr /><h2>Document Information</h2><p class="indent">
            Series: <a href="http://www.xmpp.org/extensions/">XEP</a><br />
            Number: 0140<br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status: 
            <a href="http://www.xmpp.org/extensions/xep-0001.html#states-Retracted">Retracted</a><br />
            Type:
            <a href="http://www.xmpp.org/extensions/xep-0001.html#types-Informational">Informational</a><br />
            Version: 0.2<br />
            Last Updated: 2004-10-27<br />
                Approving Body: <a href="http://www.xmpp.org/council/">XMPP Council</a><br />Dependencies: XMPP Core, XMPP IM, XEP-0060, XEP-0093<br />
                Supersedes: None<br />Superseded By: XEP-0144<br />
            Short Name: groups<br />
              Wiki Page: &lt;<a href="http://wiki.jabber.org/index.php/Shared Groups (XEP-0140)">http://wiki.jabber.org/index.php/Shared Groups (XEP-0140)</a>&gt;
            </p><hr /><h2>Author Information</h2><div class="indent"><h3>Peter Saint-Andre</h3><p class="indent">
        JabberID: 
        <a href="xmpp:stpeter@jabber.org">stpeter@jabber.org</a><br />
        URI: 
        <a href="https://stpeter.im/">https://stpeter.im/</a><br /></p></div><hr /><h2>Legal Notices</h2><div class="indent"><h3>Copyright</h3>This XMPP Extension Protocol is copyright (c) 1999 - 2008 by the XMPP Standards Foundation (XSF).<h3>Permissions</h3>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h3>Disclaimer of Warranty</h3><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. In no event shall the XMPP Standards Foundation or the authors of this Specification be liable for any claim, damages, or other liability, whether in an action of contract, tort, or otherwise, arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification. ##</span><h3>Limitation of Liability</h3>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising out of the use or inability to use the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h3>IPR Conformance</h3>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which may be found at &lt;<a href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt; or obtained by writing to XSF, P.O. Box 1641, Denver, CO 80201 USA).</div><hr /><h2>Discussion Venue</h2><p class="indent">The preferred venue for discussion of this document is the Standards discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">http://mail.jabber.org/mailman/listinfo/standards</a>&gt;.</p><p class="indent">Errata may be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><h2>Relation to XMPP</h2><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h2>Conformance Terms</h2><p class="indent">The following keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#intro">Introduction</a><br />2.  <a href="#reqs">Requirements</a><br />3.  <a href="#usecases">Use Cases</a><br />   
      3.1.  <a href="#create">Creating a Shared Group</a><br />   
      3.2.  <a href="#add">Adding a Member to the Group</a><br />   
      3.3.  <a href="#remove">Removing a Member from the Group</a><br />4.  <a href="#impl">Implementation Guidelines</a><br />   
      4.1.  <a href="#impl-hier">Group Hierarchies</a><br />   
      4.2.  <a href="#impl-pres">Exchanging Presence</a><br />   
      4.3.  <a href="#impl-msg">Sending Messages</a><br />   
      4.4.  <a href="#impl-gc">Sending Groupchat Invites</a><br />5.  <a href="#security">Security Considerations</a><br />6.  <a href="#iana">IANA Considerations</a><br />7.  <a href="#registrar">XMPP Registrar Considerations</a><br /><a href="#notes">Notes</a><br /><a href="#revs">Revision History</a></p></div><hr /><h2>1.
       <a name="intro" id="intro">Introduction</a></h2>
  <p class="" style=""><span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3921">XMPP IM</a></span>  [<a href="#nt-id2252762">1</a>] defines a protocol for personal rosters (also known as contact lists). So far all Jabber rosters are personal rosters that are defined by a single user and accessed only by that user. However, in some contexts it would be helpful to centrally define and administer roster groups so that they can be shared among a user population in an organized fashion. This functionality is often called "shared groups".</p>
  <p class="" style="">One context in which shared groups might be useful is the enterprise environment. For example, when Alice is hired by the marketing department of Big Company Enterprises, it makes sense for her to automatically have the other members of the marketing department in her roster the first time she logs in, and for the rest of the marketing department to have Alice in their rosters as soon as her account has been set up. Similarly, when Bob in logistics gets fired, it makes sense for him to disappear from the rosters of everyone else in the logistics department.</p>
  <p class="" style="">This functionality is not limited to the enterprise environment. It could prove quite useful in academic settings, social networking applications, consumer IM services, and anywhere else that it is important to build and manage small communities of users.</p>
  <p class="" style="">Although <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0093.html">Roster Item Exchange</a></span>  [<a href="#nt-id2252630">2</a>] defines a format for sharing roster items between two users and therefore enables one user to send roster items to another user, it does not currently provide a way to share or coordinate a group of roster items in an organized fashion. To make that possible, this document extends XEP-0093 by defining <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0060.html">Publish-Subscribe</a></span>  [<a href="#nt-id2252664">3</a>] as the distribution mechanism, resulting in a basic solution for shared groups over Jabber.</p>
<h2>2.
       <a name="reqs" id="reqs">Requirements</a></h2>
  <p class="" style="">This document addresses the following use cases:</p>
  <ol start="" class="" style="">
    <li class="" style="">Creating a shared group.</li>
    <li class="" style="">Adding a member to the group.</li>
    <li class="" style="">Removing a member from the group.</li>
  </ol>
  <p class="" style="">This document does not address the following use cases, which instead are discussed in the <a href="#impl">Implementation Guidelines</a> section of this document:</p>
  <ul class="" style="">
    <li class="" style="">Exchanging presence with members of a shared group.</li>
    <li class="" style="">Sending a message to all members of a shared group.</li>
    <li class="" style="">Inviting all members of a shared group to a groupchat room.</li>
  </ul>
<h2>3.
       <a name="usecases" id="usecases">Use Cases</a></h2>
  <p class="" style="">The following examples show the protocol flow for an administrator to complete the use cases defined above. Naturally, these tasks could be performed just as well by an automated application that is tied to an existing user database (e.g., LDAP).</p>
  <div class="indent"><h3>3.1 <a name="create" id="create">Creating a Shared Group</a></h3>
    <p class="" style="">A group is implemented as a pubsub node. If a contact is a member of multiple groups, the contact MUST be added to each pubsub node separately. There is a one-to-one relationship between a group and a node. It is OPTIONAL for the NodeID to include the name of the group (e.g., "groups/Marketing"), although in general it is best not to overload NodeIDs and this is unnecessary given the structure of the groups protocol as described below.</p>
    <p class="caption"><a name="example-1" id="example-1"></a>Example 1. Admin Creates a Group</p><div class="indent"><pre>
&lt;iq type='set'
    from='bofh@example.com/daygig'
    to='pubsub.example.com'
    id='create1'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;create node-id='groups/Marketing/Europe'/&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption"><a name="example-2" id="example-2"></a>Example 2. Service Informs Admin of Success</p><div class="indent"><pre>
&lt;iq type='result'
    from='pubsub.example.com'
    to='bofh@example.com/daygig'
    id='create1'/&gt;
    </pre></div>
  </div>
  <div class="indent"><h3>3.2 <a name="add" id="add">Adding a Member to the Group</a></h3>
    <p class="" style="">There are two steps to adding a member to a group, which SHOULD be performed in this order:</p>
    <ol start="" class="" style="">
      <li class="" style="">Add new member to subscriber list. (OPTIONAL)</li>
      <li class="" style="">Publish member information to node.</li>
    </ol>
    <p class="caption"><a name="example-3" id="example-3"></a>Example 3. Admin Adds Member to Subscriber List</p><div class="indent"><pre>
&lt;iq type='set'
    from='bofh@example.com/daygig'
    to='pubsub.example.com'
    id='sub1'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;entities node='groups/Marketing/Europe'&gt;
      &lt;entity jid='alice@example.com'
              affiliation='none'
              subscription='subscribed'/&gt;
    &lt;/entities&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption"><a name="example-4" id="example-4"></a>Example 4. Service Informs Admin of Success</p><div class="indent"><pre>
&lt;iq type='result'
    from='pubsub.example.com'
    to='bofh@example.com/daygig'
    id='sub1'/&gt;
    </pre></div>
    <p class="" style="">(Naturally, a member of a shared group need not be informed of changes to the group, and an entity that is informed of changes to the group need not be a member of the group. However, in most applications a group member will be a pubsub subscriber and vice-versa.)</p>
    <p class="" style="">Now the admin publishes information about the member to the group node.</p>
    <p class="caption"><a name="example-5" id="example-5"></a>Example 5. Admin Publishes Member Information</p><div class="indent"><pre>
&lt;iq type='set'
    from='bofh@example.com/daygig'
    to='pubsub.example.com'
    id='pub1'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;publish node='groups/Marketing/Europe'&gt;
      &lt;item id='alice@example.com'&gt;
        &lt;x xmlns='jabber:x:roster'
           jid='alice@example.com' 
           name='Alice Rosenbaum'&gt;
          &lt;group&gt;Marketing/Europe&lt;/group&gt;
        &lt;/x&gt;
      &lt;/item&gt;
    &lt;/publish&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The member information is then delivered to all subscribers:</p>
    <p class="caption"><a name="example-6" id="example-6"></a>Example 6. Member Information is Delivered to All Subscribers</p><div class="indent"><pre>
&lt;message
    from='pubsub.example.com'
    to='cathy@example.com'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items node='groups/Marketing/Europe'&gt;
      &lt;item id='alice@example.com'&gt;
        &lt;x xmlns='jabber:x:roster'
           jid='alice@example.com' 
           name='Alice Rosenbaum'&gt;
          &lt;group&gt;Marketing/Europe&lt;/group&gt;
        &lt;/x&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
&lt;/message&gt;
.
.
.
    </pre></div>
    <p class="" style="">Note: It is the receiving application's responsibility to add the newly-published roster item to the recipient's roster by following the protocols defined in <span class="strong">XMPP IM</span>. The receiving application SHOULD NOT prompt the recipient regarding whether or not to add the roster item, but if and only the roster item is received via pubsub (i.e., it SHOULD prompt the user when roster items are received from individual users and not via pubsub).</p>
  </div>
  <div class="indent"><h3>3.3 <a name="remove" id="remove">Removing a Member from the Group</a></h3>
    <p class="" style="">There are two steps to adding a member to a group, which SHOULD be performed in this order:</p>
    <ol start="" class="" style="">
      <li class="" style="">Remove member from subscriber list.</li>
      <li class="" style="">Purge member information from node.</li>
    </ol>
    <p class="caption"><a name="example-7" id="example-7"></a>Example 7. Admin Removes Member from Subscriber List</p><div class="indent"><pre>
&lt;iq type='set'
    from='bofh@example.com/daygig'
    to='pubsub.example.com'
    id='del1'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;entities node='groups/Marketing/Europe'&gt;
      &lt;entity jid='alice@example.com'
              affiliation='none'
              subscription='none'/&gt;
    &lt;/entities&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption"><a name="example-8" id="example-8"></a>Example 8. Service Informs Admin of Success</p><div class="indent"><pre>
&lt;iq type='result'
    from='pubsub.example.com'
    to='bofh@example.com/daygig'
    id='del1'/&gt;
    </pre></div>
    <p class="" style="">(As noted, the group member need not be a pubsub subscriber, in which case the foregoing step may not be necessary.)</p>
    <p class="" style="">Now admin can remove the member from the shared group.</p>
    <p class="caption"><a name="example-9" id="example-9"></a>Example 9. Admin Removes Member</p><div class="indent"><pre>
&lt;iq type='set'
    from='bofh@example.com/daygig'
    to='pubsub.example.com'
    id='purge1'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;retract node='groups/Marketing/Europe'&gt;
      &lt;item id='alice@example.com'/&gt;
    &lt;/retract&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">All remaining subscribers are then informed that the node has been deleted:</p>
    <p class="caption"><a name="example-10" id="example-10"></a>Example 10. Tune Information is Delivered to All Subscribers</p><div class="indent"><pre>
&lt;message
    from='pubsub.example.com'
    to='cathy@example.com'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;retract node='groups/Marketing/Europe'&gt;
      &lt;item id='alice@example.com'/&gt;
    &lt;/retract&gt;
  &lt;/event&gt;
&lt;/message&gt;
.
.
.
    </pre></div>
  </div>
<h2>4.
       <a name="impl" id="impl">Implementation Guidelines</a></h2>
  <div class="indent"><h3>4.1 <a name="impl-hier" id="impl-hier">Group Hierarchies</a></h3>
    <p class="" style="">An administrator may wish to define a hierarchy of shared groups (e.g., "Marketing/Europe" and "Marketing/North America"). This can be done using collection nodes as defined in Section 9 of XEP-0060. The receiving application MAY use <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0083.html">Nested Roster Groups</a></span>  [<a href="#nt-id2261118">4</a>] to define the roster group names.</p>
  </div>
  <div class="indent"><h3>4.2 <a name="impl-pres" id="impl-pres">Exchanging Presence</a></h3>
    <p class="" style="">Presence is exchanged via the normal mechanisms defined in <span class="strong">XMPP IM</span>.</p> 
  </div>
  <div class="indent"><h3>4.3 <a name="impl-msg" id="impl-msg">Sending Messages</a></h3>
    <p class="" style="">In order to send a message to all members of a shared group, a group member's sending application (usually an end-user client) SHOULD either send multiple messages or use <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0033.html">Extended Stanza Addressing</a></span>  [<a href="#nt-id2261179">5</a>].</p>
  </div>
  <div class="indent"><h3>4.4 <a name="impl-gc" id="impl-gc">Sending Groupchat Invites</a></h3>
    <p class="" style="">In order to invite all members of a shared group to a groupchat room, a group member's sending application SHOULD use the mechanisms defined in <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0045.html">Multi-User Chat</a></span>  [<a href="#nt-id2261227">6</a>].</p>
  </div>
<h2>5.
       <a name="security" id="security">Security Considerations</a></h2>
  <p class="" style="">This protocol introduces no security considerations above and beyond those defined in <span class="strong">XEP-0060: Publish-Subscribe</span> and <span class="strong">XEP-0093: Roster Item Exchange</span>.</p>
<h2>6.
       <a name="iana" id="iana">IANA Considerations</a></h2>
  <p class="" style="">This document requires no interaction with the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-id2261291">7</a>].</p>
<h2>7.
       <a name="registrar" id="registrar">XMPP Registrar Considerations</a></h2>
  <p class="" style="">This document requires no interaction with the <span class="ref" style=""><a href="http://www.xmpp.org/registrar/">XMPP Registrar</a></span>  [<a href="#nt-id2261332">8</a>].</p>
<hr /><h2><a name="notes" id="notes"></a>Notes</h2><div class="indent"><p><a name="nt-id2252762" id="nt-id2252762">1</a>. RFC 3921: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.</p><p><a name="nt-id2252630" id="nt-id2252630">2</a>. XEP-0093: Roster Item Exchange &lt;<a href="http://www.xmpp.org/extensions/xep-0093.html">http://www.xmpp.org/extensions/xep-0093.html</a>&gt;.</p><p><a name="nt-id2252664" id="nt-id2252664">3</a>. XEP-0060: Publish-Subscribe &lt;<a href="http://www.xmpp.org/extensions/xep-0060.html">http://www.xmpp.org/extensions/xep-0060.html</a>&gt;.</p><p><a name="nt-id2261118" id="nt-id2261118">4</a>. XEP-0083: Nested Roster Groups &lt;<a href="http://www.xmpp.org/extensions/xep-0083.html">http://www.xmpp.org/extensions/xep-0083.html</a>&gt;.</p><p><a name="nt-id2261179" id="nt-id2261179">5</a>. XEP-0033: Extended Stanza Addressing &lt;<a href="http://www.xmpp.org/extensions/xep-0033.html">http://www.xmpp.org/extensions/xep-0033.html</a>&gt;.</p><p><a name="nt-id2261227" id="nt-id2261227">6</a>. XEP-0045: Multi-User Chat &lt;<a href="http://www.xmpp.org/extensions/xep-0045.html">http://www.xmpp.org/extensions/xep-0045.html</a>&gt;.</p><p><a name="nt-id2261291" id="nt-id2261291">7</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p><p><a name="nt-id2261332" id="nt-id2261332">8</a>. The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the XMPP Standards Foundation. For further information, see &lt;<a href="http://www.xmpp.org/registrar/">http://www.xmpp.org/registrar/</a>&gt;.</p></div><hr /><h2><a name="revs" id="revs"></a>Revision History</h2><div class="indent"><h4>Version 0.2 (2004-10-27)</h4><div class="indent">Retracted in favor of XEP-0144. (psa)
    </div><h4>Version 0.1 (2004-07-26)</h4><div class="indent">Initial version. (psa)
    </div></div><hr /><p>END</p></body></html>
