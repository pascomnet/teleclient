<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0174: Link-Local Messaging</title><link rel="stylesheet" type="text/css" href="/xmpp.css" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><meta name="DC.Title" content="Link-Local Messaging" /><meta name="DC.Creator" content="Peter Saint-Andre" /><meta name="DC.Description" content="This document describes how to establish XMPP-like communications over local networks using zero-configuration networking." /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2007-06-12" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0174" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright 1999 - 2007 by the XMPP Standards Foundation (XSF) and is in full conformance with the XSF's Intellectual Property Rights Policy &lt;http://www.xmpp.org/extensions/ipr-policy.shtml&gt;. This material may be distributed only subject to the terms and conditions set forth in the Creative Commons Attribution License (&lt;http://creativecommons.org/licenses/by/2.5/&gt;)." /></head><body><h1>XEP-0174: Link-Local Messaging</h1><p>This document describes how to establish XMPP-like communications over local networks using zero-configuration networking.</p><hr /><p style="color:green">NOTICE: The protocol defined herein is a Draft Standard of the XMPP Standards Foundation. Implementations are encouraged and the protocol is appropriate for deployment in production systems, but some changes to the protocol are possible before it becomes a Final Standard.</p><hr /><h2>Document Information</h2><p class="indent">
            Series: <a href="http://www.xmpp.org/extensions/">XEP</a><br />
            Number: 0174<br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status: 
            <a href="http://www.xmpp.org/extensions/xep-0001.html#states-Draft">Draft</a><br />
            Type:
            <a href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br />
            Version: 1.0<br />
            Last Updated: 2007-06-12<br />
                Approving Body: <a href="http://www.xmpp.org/council/">XMPP Council</a><br />Dependencies: XMPP Core, XMPP IM, RFC 3927, draft-cheshire-dnsext-dns-sd, draft-cheshire-dnsext-multicastdns<br />
                Supersedes: None<br />
                Superseded By: None<br />
            Short Name: linklocal<br />
              Registry: 
              
              &lt;<a href="http://www.xmpp.org/registrar/linklocal.html">http://www.xmpp.org/registrar/linklocal.html</a>&gt;
              <br />
              Wiki Page: &lt;<a href="http://wiki.jabber.org/index.php/Link-Local Messaging (XEP-0174)">http://wiki.jabber.org/index.php/Link-Local Messaging (XEP-0174)</a>&gt;
            </p><h2>Author Information</h2><div class="indent"><h3>Peter Saint-Andre</h3><p class="indent">
        Email:
        <a href="mailto:stpeter@jabber.org">stpeter@jabber.org</a><br />
        JabberID: 
        <a href="xmpp:stpeter@jabber.org">stpeter@jabber.org</a></p></div><h2>Legal Notice</h2><p class="indent">This XMPP Extension Protocol is copyright 1999 - 2007 by the <a href="http://www.xmpp.org/xsf/">XMPP Standards Foundation</a> (XSF) and is in full conformance with the XSF's Intellectual Property Rights Policy &lt;<a href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt;. This material may be distributed only subject to the terms and conditions set forth in the Creative Commons Attribution License (&lt;<a href="http://creativecommons.org/licenses/by/2.5/">http://creativecommons.org/licenses/by/2.5/</a>&gt;).</p><h2>Discussion Venue</h2><p class="indent">The preferred venue for discussion of this document is the Standards discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">http://mail.jabber.org/mailman/listinfo/standards</a>&gt;.</p><p class="indent">Given that this XMPP Extension Protocol normatively references IETF technologies, discussion on the XSF-IETF list may also be appropriate (see &lt;<a href="http://mail.jabber.org/mailman/listinfo/jsf-ietf">http://mail.jabber.org/mailman/listinfo/jsf-ietf</a>&gt; for details).</p><h2>Relation to XMPP</h2><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h2>Conformance Terms</h2><p class="indent">The following keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#intro">Introduction</a><br />2.  <a href="#glossary">Glossary</a><br />3.  <a href="#dns">DNS Records</a><br />&#xA0;&#xA0;&#xA0;
      3.1.  <a href="#txt">TXT Records</a><br />4.  <a href="#disco">Discovering Other Users</a><br />5.  <a href="#presence">Exchanging Presence</a><br />6.  <a href="#caps">Discovering Capabilities</a><br />7.  <a href="#initiate">Initiating a Messaging Session</a><br />8.  <a href="#exchange">Exchanging Messages</a><br />9.  <a href="#end">Ending a Messaging Session</a><br />10.  <a href="#offline">Going Offline</a><br />11.  <a href="#impl">Implementation Notes</a><br />&#xA0;&#xA0;&#xA0;
      11.1.  <a href="#impl-network">Multiple Network Interfaces</a><br />&#xA0;&#xA0;&#xA0;
      11.2.  <a href="#impl-icons">Buddy Icons</a><br />12.  <a href="#i18n">Internationalization Considerations</a><br />13.  <a href="#security">Security Considerations</a><br />&#xA0;&#xA0;&#xA0;
      13.1.  <a href="#security-auth">Authentication and Encryption</a><br />&#xA0;&#xA0;&#xA0;
      13.2.  <a href="#security-inject">Stanza Injection</a><br />&#xA0;&#xA0;&#xA0;
      13.3.  <a href="#security-txt">TXT Record Data</a><br />&#xA0;&#xA0;&#xA0;
      13.4.  <a href="#security-priv">Private Information</a><br />14.  <a href="#iana">IANA Considerations</a><br />15.  <a href="#registrar">XMPP Registrar Considerations</a><br />&#xA0;&#xA0;&#xA0;
      15.1.  <a href="#registrar-linklocal">Link-Local Messaging TXT Records Registry</a><br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
      15.1.1.  <a href="#registrar-linklocal-process">Registration Process</a><br />&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
      15.1.2.  <a href="#registrar-linklocal-reg">Initial Registration</a><br />16.  <a href="#ack">Acknowledgements</a><br /><a href="#notes">Notes</a><br /><a href="#revs">Revision History</a></p></div><hr /><h2>1.
       <a name="intro" id="intro">Introduction</a></h2>
  <p class="" style="">XMPP as defined in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3920">RFC 3920</a></span>  [<a href="#nt-id2251427">1</a>] does not support direct client-to-client interactions, since it requires authentication with a server: an XMPP client is allowed access to the network only once it has authenticated with a server, and the server must not grant access if authentication fails for any reason. If an unauthenticated client attempts to communicate directly with another client, such communication will fail because all XMPP communications are sent through one or more servers and a client cannot inject messages onto the network without first authenticating with a server.</p>
  <p class="" style="">However, it is possible to establish an XMPP-like communications system on a local network using zero-configuration networking. In this situation, the clients obviate the XMPP requirement for authentication with a server by relying on zero-configuration networking to establish link-local communication using the _presence._tcp DNS SRV service type. Once discovery has been completed, the clients are then able to exchange messages and other structured data using the XMPP &lt;message/&gt; and &lt;iq/&gt; stanzas.</p>
  <p class="" style="">Link-local messaging is restricted to the local network because of how zero-configuration networking works. It is impossible for clients that communicate via link-local addresses to insert messages into an XMPP network, which is why this kind of local "mesh" is most accurately referred to as an XMPP-like system that exists outside the context of existing XMPP networks (though see the <a href="#security">Security Considerations</a> regarding the ability to "forward" messages from a local mesh to an XMPP network or vice-versa).</p>
  <p class="" style="">Such a local "mesh" can be quite valuable in certain circumstances. For instance, participants in a trade show or conference, users of the same WiFi hotspot, or employees on the same local area network can communicate without the need for a pre-configured server. For this reason, support for link-local messaging has been a feature of Apple's iChat client when operating in Bonjour (formerly Rendezvous) mode. Because it is desirable for other Jabber clients to support such functionality, this document describes how to use zero-configuration networking as the basis for link-local communication.</p>
<h2>2.
       <a name="glossary" id="glossary">Glossary</a></h2>
  <p class="caption">Table 1: Terminology</p><table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Term</th>
      <th colspan="" rowspan="">Description</th>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Bonjour</td>
      <td colspan="" rowspan="">Apple Computer's implementation of zero-configuration networking, formerly known as Rendezvous. See &lt;<a href="http://www.apple.com/macosx/features/bonjour/">http://www.apple.com/macosx/features/bonjour/</a>&gt;.</td> 
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">DNS-SD</td>
      <td colspan="" rowspan="">A convention for naming and structuring DNS SRV records such that a client can dynamically discover a domain for a service using only standard DNS queries. See <span class="ref" style=""><a href="http://files.dns-sd.org/draft-cheshire-dnsext-dns-sd.txt">DNS-Based Service Discovery</a></span>  [<a href="#nt-id2260407">2</a>]. For a full list of registered DNS-SD records, see &lt;<a href="http://www.dns-sd.org/ServiceTypes.html">http://www.dns-sd.org/ServiceTypes.html</a>&gt;.</td> 
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Link-local address</td>
      <td colspan="" rowspan="">An IPv4 or IPv6 address that is valid for communication with other devices connected to the same physical or logical link. See <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3927">RFC 3927</a></span>  [<a href="#nt-id2260460">3</a>].</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Multicast DNS (mDNS)</td>
      <td colspan="" rowspan="">A technology that provides the ability to perform DNS-like operations on a local link in the absence of any conventional unicast DNS server. See <span class="ref" style=""><a href="http://files.multicastdns.org/draft-cheshire-dnsext-multicastdns.txt">Multicast DNS</a></span>  [<a href="#nt-id2260511">4</a>].</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Zero-configuration networking</td>
      <td colspan="" rowspan="">A set of technologies that enable the use of the Internet Protocol for local communications. See &lt;<a href="http://www.zeroconf.org/">http://www.zeroconf.org/</a>&gt;.</td> 
    </tr>
  </table>
<h2>3.
       <a name="dns" id="dns">DNS Records</a></h2>
  <p class="" style="">In order to advertise its availability for link-local messaging, a client MUST publish four different kinds of DNS records:</p>
  <ol start="" class="" style="">
    <li class="" style="">
      <p class="" style="">An address ("A" or "AAAA") record of the following form:  [<a href="#nt-id2260581">5</a>]</p>
      <p class="caption"></p><div class="indent"><pre>
machine-name.local. A ip-address
      </pre></div>
    </li>
    <li class="" style="">
      <p class="" style="">An "SRV" record (see <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc2782">RFC 2782</a></span>  [<a href="#nt-id2260631">6</a>]) of the following form:</p>
      <p class="caption"></p><div class="indent"><pre>
_presence._tcp &lt;ttl&gt; IN SRV &lt;priority&gt; &lt;weight&gt; port-number username@machine-name.local. 
      </pre></div>
    </li>
    <li class="" style="">
      <p class="" style="">A "PTR" record (see <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc2317">RFC 2317</a></span>  [<a href="#nt-id2260678">7</a>] and <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc1886">RFC 1886</a></span>  [<a href="#nt-id2260705">8</a>]) of the following form:</p>
      <p class="caption"></p><div class="indent"><pre>
_presence._tcp.local. port-number IN PTR username@machine-name._presence._tcp.local.
      </pre></div>
    </li>
    <li class="" style="">
      <p class="" style="">Optionally, various "TXT" records (see <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc1464">RFC 1464</a></span>  [<a href="#nt-id2260736">9</a>]) of the following form, as further described in to the <a href="#txt">TXT Records</a> section of this document:</p>
      <p class="caption"></p><div class="indent"><pre>
&lt;owner&gt; IN &lt;ttl&gt; TXT "1st=user-first-name"
&lt;owner&gt; IN &lt;ttl&gt; TXT "email=user-email-address"
&lt;owner&gt; IN &lt;ttl&gt; TXT "ext=optional-list-of-extensions"
&lt;owner&gt; IN &lt;ttl&gt; TXT "jid=user-jabber-id"
&lt;owner&gt; IN &lt;ttl&gt; TXT "last=user-last-name"
&lt;owner&gt; IN &lt;ttl&gt; TXT "msg=freeform-availability-status"
&lt;owner&gt; IN &lt;ttl&gt; TXT "nick=user-nickname"
&lt;owner&gt; IN &lt;ttl&gt; TXT "node=application-identifier"
&lt;owner&gt; IN &lt;ttl&gt; TXT "phsh=sha1-hash-of-avatar"
&lt;owner&gt; IN &lt;ttl&gt; TXT "port.p2pj=5562"
&lt;owner&gt; IN &lt;ttl&gt; TXT "status=avail-away-or-dnd"
&lt;owner&gt; IN &lt;ttl&gt; TXT "txtvers=1"
&lt;owner&gt; IN &lt;ttl&gt; TXT "vc=capabilities-string"
&lt;owner&gt; IN &lt;ttl&gt; TXT "ver=application-version"
      </pre></div>
    </li>
  </ol>
  <p class="" style="">The "machine-name" is the name of the computer, the "username" is the system username of the principal currently logged into the computer, the "port" may be any unassigned port number, and the "ip-address" is the physical address of the computer on the local network.</p>
  <p class="" style="">So, for example, if the machine name is "roundabout", the username is "stpeter", the chosen port is "5562", the IP address is "10.2.1.187", and the personal information is that associated with the author of this document, the DNS records would be as follows:</p>
  <p class="caption"></p><div class="indent"><pre>
roundabout.local. A 10.2.1.187

_presence._tcp IN SRV 5562 stpeter@roundabout.local. 

_presence._tcp.local. 5562 IN PTR stpeter@roundabout._presence._tcp.local.

psa IN TXT "1st=Peter"
psa IN TXT "email=stpeter@jabber.org"
psa IN TXT "ext=rcd sgc auxvideo sgs mvideo avavail avcap maudio"
psa IN TXT "jid=stpeter@jabber.org"
psa IN TXT "last=Saint-Andre"
psa IN TXT "msg=IETF 66 Montreal"
psa IN TXT "nick=stpeter"
psa IN TXT "node=http://www.apple.com/ichat/caps"
psa IN TXT "phsh=a3839614e1a382bcfebbcf20464f519e81770813"
psa IN TXT "port.p2pj=5562"
psa IN TXT "status=avail"
psa IN TXT "txtvers=1"
psa IN TXT "vc=CA!"
psa IN TXT "ver=524"

  </pre></div>
  <p class="" style="">The IPv4 and IPv6 addresses associated with a machine may vary depending on the local network to which the machine is connected. For example, on an Ethernet connection the physical address might be "10.2.1.187" but when the machine is connected to a wireless network, its physical address might change to "10.10.1.179".</p>
  <p class="" style="">If the machine name asserted by a client is already taken by another machine on the network, the client MUST assert a different machine name, which SHOULD be formed by adding the character "-" and digit "1" to the end of the machine name string (e.g., "roundabout-1"), adding the character "-" and digit "2" if the resulting machine name is already taken (e.g., "roundabout-2"), and similarly incrementing the digit until a unique machine name is constructed.</p> 
  <p class="" style="">If the username asserted by a client is already taken by another application on the machine, the client MUST assert a different username, which SHOULD be formed by adding the character "-" and digit "1" to the end of the username string (e.g., "stpeter-1"), adding the character "-" and digit "2" if the resulting username is already taken (e.g., "stpeter-2"), and similarly incrementing the digit until a unique username is constructed.</p> 
  <div class="indent"><h3>3.1 <a name="txt" id="txt">TXT Records</a></h3>
  <p class="" style="">DNS-SD enables service definitions to include various TXT records that specify parameters to be used in the context of the relevant service type. The <span class="ref" style=""><a href="http://www.xmpp.org/registrar/">XMPP Registrar</a></span>  [<a href="#nt-id2260900">10</a>] shall maintain a registry of TXT records for use with the _presence._tcp service type, as specified in the <a href="#registrar">XMPP Registrar Considerations</a> section of this document.</p>
  <p class="" style="">It is OPTIONAL to include any of these TXT records, and an implementation MUST NOT fail (i.e., MUST enable link-local messaging) even if none of the TXT records are provided by another local entity.</p>
  <p class="" style="">Most of the registered TXT records relate to human users, in which context certain records are of greater interest than others, e.g. "msg", "nick", and "status"; however, link-local messaging can be used by non-human entities (e.g., devices).</p>
  <p class="" style="">Note: See the <a href="#security">Security Considerations</a> section of this document regarding the inclusion of information that may have an impact on personal privacy (e.g., the "1st", "last", "nick", "email", and "jid" records).</p>
</div>
<h2>4.
       <a name="disco" id="disco">Discovering Other Users</a></h2>
  <p class="" style="">In order to discover other users, a client sends an mDNS request for PTR records that match "_presence._tcp.local.". The client then receives replies from all machines that advertise support for link-local messaging.  [<a href="#nt-id2260976">11</a>] The client MAY then find out detailed information about each machine by sending SRV and TXT queries to "username@machine-name._presence._tcp.local." for each machine (however, to preserve bandwidth, the client SHOULD NOT send these queries unless it is about to initiate communications with the other user, and it MUST cancel the queries after it has received a response). Note: The presence name to be used for display in a link-local "roster" SHOULD be obtained from the &lt;Instance&gt; portion of the received PTR record for each user; however, the client MAY instead display a name or nickname derived from the TXT records if available.</p>
<h2>5.
       <a name="presence" id="presence">Exchanging Presence</a></h2>
  <p class="" style="">When the _presence._tcp service is used, presence is exchanged via the format described in the <a href="#txt">TXT Records</a> section of this document. In particular, presence information is not pushed as in XMPP (see <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3921">RFC 3921</a></span>  [<a href="#nt-id2261050">12</a>]). Instead, clients listen for presence announcements from other local entities. Recommended rates for sending updates can be found in <span class="ref">Multicast DNS</span>.</p>
<h2>6.
       <a name="caps" id="caps">Discovering Capabilities</a></h2>
  <p class="" style="">Because link-local communication does not involve the exchange of XMPP presence, it is not possible to use <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0115.html">Entity Capabilities</a></span>  [<a href="#nt-id2261097">13</a>] for capabilities discovery. Therefore, it is RECOMMENDED to instead include the node and ver TXT records (and OPTIONAL to include the ext TXT record). The values of these records MUST be the same as the values for the 'node', 'ver', and 'ext' attributes that are advertised for the application in XMPP presence (if any) via the Entity Capabilities protocol as described in <span class="ref">XEP-0115</span>.</p>
<h2>7.
       <a name="initiate" id="initiate">Initiating a Messaging Session</a></h2>
  <p class="" style="">In order to exchange link-local messages, the initiator and recipient MUST first establish XML streams between themselves, as is familiar from <span class="ref">RFC 3920</span>.</p>
  <p class="" style="">First, the initiator opens a TCP connection at the IP address and port discovered via the DNS lookup for a local entity and opens an XML stream to the recipient, which SHOULD include 'to' and 'from' address:</p>
  <p class="caption"><a name="example-1" id="example-1"></a>Example 1. Opening a Stream</p><div class="indent"><pre>
&lt;stream:stream 
        xmlns='jabber:client' 
        xmlns:stream='http://etherx.jabber.org/streams'
        from='stpeter@roundabout'
        to='hildjj@wolfram'
        version='1.0'&gt;
  </pre></div>
  <p class="" style="">Note: If the initiator supports stream features and the other stream-related aspects of XMPP 1.0 as specified in <span class="ref">RFC 3920</span>, then it SHOULD include the version='1.0' flag as shown in the previous example.</p>
  <p class="" style="">The recipient then responds with a stream header as well:</p>
  <p class="caption"><a name="example-2" id="example-2"></a>Example 2. Stream Header Response</p><div class="indent"><pre>
&lt;stream:stream 
        xmlns='jabber:client' 
        xmlns:stream='http://etherx.jabber.org/streams'
        from='hildjj@wolfram'
        to='stpeter@roundabout'
        version='1.0'&gt;
  </pre></div>
  <p class="" style="">If both the initiator and recipient included the version='1.0' flag, the recipient SHOULD also send stream features as specified in <span class="ref">RFC 3920</span>:</p>
  <p class="caption"><a name="example-3" id="example-3"></a>Example 3. Recipient Sends Stream Features</p><div class="indent"><pre>
&lt;stream:features&gt;
  &lt;starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/&gt;
&lt;/stream:features&gt;
  </pre></div>
  <p class="" style="">The exchange of stream headers results in an unencrypted and unauthenticated channel between the two entities. See the <a href="#security">Security Considerations</a> section of this document regarding methods for authenticating and encrypting the stream.</p>
<h2>8.
       <a name="exchange" id="exchange">Exchanging Messages</a></h2>
  <p class="" style="">Once the streams are established, either entity then can send XMPP message or IQ stanzas by specifying 'to' and 'from' addresses using the logical local addresses:  [<a href="#nt-id2261236">14</a>]</p>
  <p class="caption"><a name="example-4" id="example-4"></a>Example 4. Sending a Message</p><div class="indent"><pre>
&lt;message to='hildjj@wolfram' from='stpeter@roundabout'&gt;
  &lt;body&gt;Hey, I'm testing out link-local messaging!&lt;/body&gt;
&lt;/message&gt;
  </pre></div>
<h2>9.
       <a name="end" id="end">Ending a Messaging Session</a></h2>
  <p class="" style="">To end the chat, either party closes the XML stream:</p>
  <p class="caption"><a name="example-5" id="example-5"></a>Example 5. Ending the Chat</p><div class="indent"><pre>
&lt;/stream:stream&gt;
  </pre></div>
  <p class="" style="">The other party then closes the stream in the other direction as well:</p>
  <p class="caption"><a name="example-6" id="example-6"></a>Example 6. Closing the Stream</p><div class="indent"><pre>
&lt;/stream:stream&gt;
  </pre></div>
  <p class="" style="">Both parties then MUST close the TCP connection between them.</p>
<h2>10.
       <a name="offline" id="offline">Going Offline</a></h2>
  <p class="" style="">In order to go offline, a client MUST send a Multicast DNS "Goodbye" packet for the user's PTR record. As a result, all other entities on the local network will receive a Multicast DNS "Remove" event, at which point they MUST cancel any outstanding TXT, SRV, or NULL record queries for the offline user.</p>
<h2>11.
       <a name="impl" id="impl">Implementation Notes</a></h2>
  <div class="indent"><h3>11.1 <a name="impl-network" id="impl-network">Multiple Network Interfaces</a></h3>
    <p class="" style="">Devices that use link-local messaging may have multiple network interfaces. As a result, it is possible to discover the same entity multiple times. Even if a client discovers the same presence name on multiple network interfaces, it MUST show only one entity in the local roster. In addition, because local IP addresses can be dynamically re-assigned, the client SHOULD NOT store the IP address to be used for communications when it discovers that address in the initial DNS lookup phase; instead, it SHOULD delay sending the Multicast DNS query until the client is ready to communicate with the other entity.</p>
  </div>
  <div class="indent"><h3>11.2 <a name="impl-icons" id="impl-icons">Buddy Icons</a></h3>
    <p class="" style="">If an entity has an associated icon (e.g., a user avatar or photo), its client SHOULD publish the raw binary data for that image via a DNS NULL record of the following form:</p>
    <p class="caption"></p><div class="indent"><pre>
_presence._tcp.local. IN NULL raw-binary-data-here
    </pre></div>
    <p class="" style="">Note: In accordance with <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc1035">RFC 1035</a></span>  [<a href="#nt-id2261406">15</a>], the data MUST be 65535 octets or less.</p>
    <p class="" style="">After retrieving the "phsh" value from a Buddy's TXT record, a client SHOULD search its local picture database to learn the last recorded picture hash value for an entity and then compare it to the "phsh" value in the TXT record. If the values are equal, the client SHOULD use the local copy of the icon. If the picture hash values are not equal, the client SHOULD issue a Multicast DNS NULL record query to retrieve the new icon. After retrieving the NULL record, the client SHOULD replace the old "phsh" value in the picture database with the new "phsh" value and save the icon to disk. If the client needs to send a Multicast DNS query in order to retrieve the icon, it MUST cancel the NULL record query immediately after receiving a response containing the new picture data.</p>
    <p class="" style="">If a user changes their picture, the user's client MUST update the NULL record with the contents of the new picture, calculate a new picture hash, and then update the "phsh" value in the TXT record with the new hash value. Since all users logged into local presence are monitoring for TXT record changes, they will see that the "phsh" value was changed; if they wish to view the new icon, their clients SHOULD issue a new Multicast DNS query to retrieve the updated picture.</p>
  </div>
<h2>12.
       <a name="i18n" id="i18n">Internationalization Considerations</a></h2>
  <p class="" style=""><span class="ref">RFC 1035</span> does not allow characters outside the <span class="ref" style="">US-ASCII</span>  [<a href="#nt-id2261482">16</a>] character range in DNS A records. Therefore the "machine-name" portion of an A record as used for link-local messaging MUST NOT contain characters outside the US-ASCII character range.</p>
  <p class="" style="">Although <span class="ref">RFC 2317</span> and <span class="ref">RFC 2782</span> do not allow characters outside the US-ASCII character range in PTR and SRV records respectively, Section 4.1 of <span class="ref">DNS-Based Service Discovery</span> recommends support for UTF-8-encoded Unicode characters in the &lt;Instance&gt; portion of Service Instance Names, which in link-local messaging is the "username@machine-name" portion of the PTR or SRV record. This document adheres to the recommendation in <span class="ref">DNS-Based Service Discovery</span>. However, as mentioned above, the "machine-name" portion of the &lt;Instance&gt; portion MUST NOT contain characters outside the US-ASCII range.</p>
  <p class="" style="">Although <span class="ref">RFC 1464</span> does not allow characters outside the US-ASCII character range in TXT records, Section 6.5 of <span class="ref">DNS-Based Service Discovery</span> mentions support for UTF-8-encoded Unicode characters in text record values (e.g., values of the TXT "msg" name). This document adheres to the recommendation in <span class="ref">DNS-Based Service Discovery</span>.</p>
<h2>13.
       <a name="security" id="security">Security Considerations</a></h2>
  <div class="indent"><h3>13.1 <a name="security-auth" id="security-auth">Authentication and Encryption</a></h3>
    <p class="" style="">XMPP networks use TLS (<span class="ref" style=""><a href="http://tools.ietf.org/html/rfc2246">RFC 2246</a></span>  [<a href="#nt-id2261592">17</a>]) for channel encryption, SASL (<span class="ref" style=""><a href="http://tools.ietf.org/html/rfc4422">RFC 4422</a></span>  [<a href="#nt-id2261622">18</a>]) for authentication, and the Domain Name System (<span class="ref" style=""><a href="http://tools.ietf.org/html/rfc1034">RFC 1034</a></span>  [<a href="#nt-id2261649">19</a>]) for weak validation of server hostnames; these technologies help to ensure the identity of sending entities and to encrypt XML streams. By contrast, zero-configuration networking uses dynamic discovery and asserted machine names as the basis of sender identity. Therefore, link-local messaging does not result in authenticated identities in the same way that XMPP itself does, nor does it provide for an encrypted channel between local entities.</p>
    <p class="" style="">There are two potential solutions to this problem:</p>
    <ol start="" class="" style="">
      <li class="" style="">Negotiate the use of TLS and SASL for the XML stream as described in <span class="ref">RFC 3920</span>.</li>
      <li class="" style="">Negotiate encryption with identity checking for the message exchange using <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0116.html">Encrypted Session Negotiation</a></span>  [<a href="#nt-id2261720">20</a>].</li>
    </ol>
    <p class="" style="">It is RECOMMENDED to use one of these methods to secure communications between local entities. However, subject to client configuration and local service policies, two entities MAY accept an unauthenticated and unencrypted channel; but a client SHOULD warn the human user that the channel is unauthenticated and unencrypted.</p>
  </div>
  <div class="indent"><h3>13.2 <a name="security-inject" id="security-inject">Stanza Injection</a></h3>
    <p class="" style="">Because of fundamental differences between a true XMPP network and a localized XMPP client "mesh", local entities MUST NOT attempt to inject local traffic onto an XMPP network and an XMPP server MUST reject communications until an entity is properly authenticated in accordance with the rules defined in <span class="ref">RFC 3920</span>. However, a client on a local mesh MAY forward traffic to an XMPP network after having properly authenticated on such a network (e.g., to forward a message received on a local client mesh to a contact on an XMPP network).</p>
  </div>
  <div class="indent"><h3>13.3 <a name="security-txt" id="security-txt">TXT Record Data</a></h3>
    <p class="" style="">Because there is no mechanism for validating the information that is published in DNS TXT records, it is possible for clients to "poison" this information (e.g., by publishing email addresses or Jabber IDs that are controlled by or associated with other users).</p>
  </div>
  <div class="indent"><h3>13.4 <a name="security-priv" id="security-priv">Private Information</a></h3>
    <p class="" style="">The TXT records optionally advertised as part of this protocol MAY result in exposure of privacy-sensitive information about a human user (such as full name, email address, and Jabber ID). A client MUST allow a user to disable publication of this personal information (e.g., via client configuration).</p>
  </div>
<h2>14.
       <a name="iana" id="iana">IANA Considerations</a></h2>
  <p class="" style="">DNS-SD service type names are not yet managed by the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-id2261841">21</a>]. Section 19 of <span class="ref">DNS-Based Service Discovery</span> proposes an IANA allocation policy for unique application protocol or service type names. Until the proposal is adopted and in force, Section 19 points to &lt;<a href="http://www.dns-sd.org/ServiceTypes.html">http://www.dns-sd.org/ServiceTypes.html</a>&gt; regarding registration of service type names for DNS-SD.</p>
  <p class="" style="">Before this specification was written, there was an existing registration for the "presence" service type, with registration information as follows:</p>
  <div class="indent" style="">
    <ol start="" class="" style="">
      <li class="" style="">Short name: presence</li>
      <li class="" style="">Long name: iChat AV</li>
      <li class="" style="">Responsible person: Jens Alfke &lt;jens at apple.com&gt;</li>
      <li class="" style="">Defined TXT keys: txtvers, port.p2pj, phsh, vc, 1st, AIM, msg, status, last</li>
    </ol>
  </div>
  <p class="" style="">On 2007-05-14, the XMPP Registrar submitted the following proposed modification to the existing registration, which was accepted on 2007-05-30:</p>
  <div class="indent" style="">
    <ol start="" class="" style="">
      <li class="" style="">Short name: presence</li>
      <li class="" style="">Long name: Link-Local Messaging</li>
      <li class="" style="">Responsible person: XMPP Registrar &lt;registrar at xmpp.org&gt;</li>
      <li class="" style="">Protocol URL: http://www.xmpp.org/extensions/xep-0174.html</li>
      <li class="" style="">Primary transport protocol: _tcp</li>
      <li class="" style="">TXT keys URL: http://www.xmpp.org/registrar/linklocal.html</li>
    </ol>
  </div>
<h2>15.
       <a name="registrar" id="registrar">XMPP Registrar Considerations</a></h2>
  <div class="indent"><h3>15.1 <a name="registrar-linklocal" id="registrar-linklocal">Link-Local Messaging TXT Records Registry</a></h3>
    <p class="" style="">The <span class="ref" style=""><a href="http://www.xmpp.org/registrar/">XMPP Registrar</a></span>  [<a href="#nt-id2262038">22</a>] maintains a registry of TXT records advertised in the context of link-local messaging (see &lt;<a href="http://www.xmpp.org/registrar/linklocal.html">http://www.xmpp.org/registrar/linklocal.html</a>&gt;).</p>
    <div class="indent"><h3>15.1.1 <a name="registrar-linklocal-process" id="registrar-linklocal-process">Registration Process</a></h3>
      <p class="" style="">In order to submit new values to this registry, the registrant must define an XML fragment of the following form and either include it in the relevant XMPP Extension Protocol or send it to the email address &lt;registrar@xmpp.org&gt;:</p>
      <p class="caption"></p><div class="indent"><pre>
&lt;record&gt;
  &lt;name&gt;The attribute name of the TXT record.&lt;/name&gt;
  &lt;desc&gt;A natural-language description of the record.&lt;/desc&gt;
  &lt;status&gt;
    The requirements status of the record. Should be one of: 
      - required
      - recommended 
      - optional
      - deprecated
      - obsolete
 &lt;/status&gt;
&lt;/record&gt;
      </pre></div>
      <p class="" style="">The registrant may register more than one TXT record at a time, each contained in a separate &lt;record/&gt; element.</p>
    </div>
    <div class="indent"><h3>15.1.2 <a name="registrar-linklocal-reg" id="registrar-linklocal-reg">Initial Registration</a></h3>
      <p class="" style="">The following submission registers TXT records in use as of June 2007. Refer to the registry itself for a complete and current list of TXT records (this specification may or may not be revised when new TXT records are registered).</p>
      <p class="caption"></p><div class="indent"><pre>

&lt;record&gt;
  &lt;name&gt;1st&lt;/name&gt;
  &lt;desc&gt;The given or first name of the user.&lt;/desc&gt;
  &lt;status&gt;optional&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;email&lt;/name&gt;
  &lt;desc&gt;
    The email address of the user; may contain a space-separated list 
    of more than one email address.
  &lt;/desc&gt;
  &lt;status&gt;optional&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;ext&lt;/name&gt;
  &lt;desc&gt;
    A space-separated list of extensions; the value of this record MUST 
    be the same as that provided via normal XMPP presence (if applicable) 
    in the 'ext' attribute specified in XEP-0115; for details, refer to 
    the Discovering Capabilities section of XEP-0174.
  &lt;/desc&gt;
  &lt;status&gt;recommended&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;jid&lt;/name&gt;
  &lt;desc&gt;
    The Jabber ID of the user; may contain a space-separated list of 
    more than one JID.
  &lt;/desc&gt;
  &lt;status&gt;recommended&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;last&lt;/name&gt;
  &lt;desc&gt;The family or last name of the user.&lt;/desc&gt;
  &lt;status&gt;optional&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;msg&lt;/name&gt;
  &lt;desc&gt;
    Natural-language text describing the user's state. This is 
    equivalent to the XMPP &amp;lt;status/&amp;gt;; element.
  &lt;/desc&gt;
  &lt;status&gt;optional&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;nick&lt;/name&gt;
  &lt;desc&gt;A friendly or informal name for the user.&lt;/desc&gt;
  &lt;status&gt;recommended&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;node&lt;/name&gt;
  &lt;desc&gt;
    A unique identifier for the application; the value of this record MUST 
    be the same as that provided via normal XMPP presence (if applicable) 
    in the 'node' attribute specified in XEP-0115; for details, refer to 
    the Discovering Capabilities section of XEP-0174.
  &lt;/desc&gt;
  &lt;status&gt;recommended&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;phsh&lt;/name&gt;
  &lt;desc&gt;
    The SHA-1 hash of the user's avatar icon or photo. This SHOULD be 
    requested using mDNS in unicast mode by sending a DNS query to the 
    mDNS multicast address (224.0.0.251 or its IPv6 equivalent FF02::FB).
    The client should keep a local cache of icons keyed by hash. If the 
    phsh value is not in the cache, the client should fetch the unknown 
    icon and then cache it. Implementations should also include logic for 
    expiring avatar icons.
  &lt;/desc&gt;
  &lt;status&gt;optional&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;port.p2pj&lt;/name&gt;
  &lt;desc&gt;
    The port for link-local communications. This MUST be the same as the
    value provided for SRV lookups. Clients MUST use the port discovered 
    via SRV lookups and MUST ignore the value of this TXT record. However, 
    clients SHOULD advertise this TXT record if it is important to ensure
    backwards-compatibility with some existing implementations. (Note: In
    some existing implementations this value was hardcoded to "5298".)
  &lt;/desc&gt;
  &lt;status&gt;deprecated&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;status&lt;/name&gt;
  &lt;desc&gt;
    The presence availability of the user. Allowable values are "avail", "away", 
    and "dnd", which map to mere XMPP presence (the user is available) and the 
    XMPP &amp;lt;show/&amp;gt; values of "away" and "dnd", respectively; if the status
    record is not included, the status should be assumed to be "avail".
  &lt;/desc&gt;
  &lt;status&gt;recommended&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;txtvers&lt;/name&gt;
  &lt;desc&gt;
    The version of the TXT records supported by the client. For backwards 
    compatibility this is hardcoded at "1".
  &lt;/desc&gt;
  &lt;status&gt;deprecated&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;vc&lt;/name&gt;
  &lt;desc&gt;
    A flag advertising the user's ability to engage in audio or video 
    conferencing. If the user is able to engage in audio conferencing, 
    the string MUST include the "A" character. If the user is able to 
    engage in video conferencing, the string MUST include the "V" 
    character. If the user is able to engage in conferencing with more 
    than one participant, the string MUST include the "C" character. If 
    the user is not currently engaged in an audio or video conference, 
    the string MUST include the "!" character. The order of characters 
    in the string is immaterial. NOTE: This flag is included only for
    backwards-compatibility; implementations SHOULD use the node, ver, 
    and ext records for more robust capabilities discovery as described 
    in the Discovering Capabilities section of XEP-0174.
  &lt;/desc&gt;
  &lt;status&gt;optional&lt;/status&gt;
&lt;/record&gt;

&lt;record&gt;
  &lt;name&gt;ver&lt;/name&gt;
  &lt;desc&gt;
    The application version; the value of this record MUST be the same as that 
    provided via normal XMPP presence (if applicable) in the 'ver' attribute 
    specified in XEP-0115; for details, refer to the Discovering Capabilities 
    section of XEP-0174.
  &lt;/desc&gt;
  &lt;status&gt;recommended&lt;/status&gt;
&lt;/record&gt;

      </pre></div>
    </div>
  </div>
<h2>16.
       <a name="ack" id="ack">Acknowledgements</a></h2>
  <p class="" style="">Thanks to Jens Alfke, Justin Karneges, Marc Krochmal, Eric St. Onge, and Sjoerd Simons for their input.</p>
<hr /><h2><a name="notes" id="notes"></a>Notes</h2><div class="indent"><p><a name="nt-id2251427" id="nt-id2251427">1</a>. RFC 3920: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a href="http://tools.ietf.org/html/rfc3920">http://tools.ietf.org/html/rfc3920</a>&gt;.</p><p><a name="nt-id2260407" id="nt-id2260407">2</a>. DNS-Based Service Discovery &lt;<a href="http://files.dns-sd.org/draft-cheshire-dnsext-dns-sd.txt">http://files.dns-sd.org/draft-cheshire-dnsext-dns-sd.txt</a>&gt;. Work in progress.</p><p><a name="nt-id2260460" id="nt-id2260460">3</a>. RFC 3927: Dynamic Configuration of IPv4 Link-Local Addresses &lt;<a href="http://tools.ietf.org/html/rfc3927">http://tools.ietf.org/html/rfc3927</a>&gt;.</p><p><a name="nt-id2260511" id="nt-id2260511">4</a>. Multicast DNS &lt;<a href="http://files.multicastdns.org/draft-cheshire-dnsext-multicastdns.txt">http://files.multicastdns.org/draft-cheshire-dnsext-multicastdns.txt</a>&gt;. Work in progress.</p><p><a name="nt-id2260581" id="nt-id2260581">5</a>. The IP address MAY be either an IPv4 address or an IPv6 address.</p><p><a name="nt-id2260631" id="nt-id2260631">6</a>. RFC 2782: A DNS RR for specifying the location of services (DNS SRV) &lt;<a href="http://tools.ietf.org/html/rfc2782">http://tools.ietf.org/html/rfc2782</a>&gt;.</p><p><a name="nt-id2260678" id="nt-id2260678">7</a>. RFC 2317: Classless IN-ADDR.ARPA delegation &lt;<a href="http://tools.ietf.org/html/rfc2317">http://tools.ietf.org/html/rfc2317</a>&gt;.</p><p><a name="nt-id2260705" id="nt-id2260705">8</a>. RFC 1886: DNS Extensions to support IP version 6 &lt;<a href="http://tools.ietf.org/html/rfc1886">http://tools.ietf.org/html/rfc1886</a>&gt;.</p><p><a name="nt-id2260736" id="nt-id2260736">9</a>. RFC 1464: Using the Domain Name System To Store Arbitrary String Attributes &lt;<a href="http://tools.ietf.org/html/rfc1464">http://tools.ietf.org/html/rfc1464</a>&gt;.</p><p><a name="nt-id2260900" id="nt-id2260900">10</a>. The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the XMPP Standards Foundation. For further information, see &lt;<a href="http://www.xmpp.org/registrar/">http://www.xmpp.org/registrar/</a>&gt;.</p><p><a name="nt-id2260976" id="nt-id2260976">11</a>. The replies will include a record corresponding the client itself; the client MUST filter out this result.</p><p><a name="nt-id2261050" id="nt-id2261050">12</a>. RFC 3921: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.</p><p><a name="nt-id2261097" id="nt-id2261097">13</a>. XEP-0115: Entity Capabilities &lt;<a href="http://www.xmpp.org/extensions/xep-0115.html">http://www.xmpp.org/extensions/xep-0115.html</a>&gt;.</p><p><a name="nt-id2261236" id="nt-id2261236">14</a>. The to and from addresses MUST be of the form "username@machine-name" as discovered via SRV (this is the &lt;Instance&gt; portion of the Service Instance Name).</p><p><a name="nt-id2261406" id="nt-id2261406">15</a>. RFC 1035: Domain Names - Implementation and Specification &lt;<a href="http://tools.ietf.org/html/rfc1035">http://tools.ietf.org/html/rfc1035</a>&gt;.</p><p><a name="nt-id2261482" id="nt-id2261482">16</a>. Coded Character Set - 7-bit American Standard Code for Information Interchange (American National Standards Institute X3.4, 1986).</p><p><a name="nt-id2261592" id="nt-id2261592">17</a>. RFC 2246: The TLS Protocol Version 1.0 &lt;<a href="http://tools.ietf.org/html/rfc2246">http://tools.ietf.org/html/rfc2246</a>&gt;.</p><p><a name="nt-id2261622" id="nt-id2261622">18</a>. RFC 4422: Simple Authentication and Security Layer (SASL) &lt;<a href="http://tools.ietf.org/html/rfc4422">http://tools.ietf.org/html/rfc4422</a>&gt;.</p><p><a name="nt-id2261649" id="nt-id2261649">19</a>. RFC 1034: Domain Names - Concepts and Facilities &lt;<a href="http://tools.ietf.org/html/rfc1034">http://tools.ietf.org/html/rfc1034</a>&gt;.</p><p><a name="nt-id2261720" id="nt-id2261720">20</a>. XEP-0116: Encrypted Session Negotiation &lt;<a href="http://www.xmpp.org/extensions/xep-0116.html">http://www.xmpp.org/extensions/xep-0116.html</a>&gt;.</p><p><a name="nt-id2261841" id="nt-id2261841">21</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p><p><a name="nt-id2262038" id="nt-id2262038">22</a>. The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the XMPP Standards Foundation. For further information, see &lt;<a href="http://www.xmpp.org/registrar/">http://www.xmpp.org/registrar/</a>&gt;.</p></div><hr /><h2><a name="revs" id="revs"></a>Revision History</h2><div class="indent"><h4>Version 1.0 (2007-06-12)</h4><div class="indent"><p class="" style="">Per a vote of the XMPP Council, advanced status to Draft; XMPP Registrar assigned linklocal shortname and created appropriate registry.</p> (psa)
    </div><h4>Version 0.16 (2007-05-30)</h4><div class="indent"><p class="" style="">Updated the definition of port.p2pj TXT record so that it is not hardcoded to 5298 but instead tracks the port advertised via SRV; updated the IANA considerations to reflect acceptance of the proposed registration change by the maintainers of the http://www.dns-sd.org/ServiceTypes.html website.</p> (psa)
    </div><h4>Version 0.15 (2007-05-14)</h4><div class="indent"><p class="" style="">Updated IANA Considerations to reflect proposed modifications to DNS-SD registration.</p> (psa)
    </div><h4>Version 0.14 (2007-05-11)</h4><div class="indent"><p class="" style="">Specified that email and jid TXT values may contain a space-separated list of addresses; clarified roster display rules; clarified rules for handling presence name collisions; added security consideration about lack of validation for TXT record data.</p> (psa)
    </div><h4>Version 0.13 (2007-03-28)</h4><div class="indent"><p class="" style="">Clarified handling of stream version.</p> (psa)
    </div><h4>Version 0.12 (2007-03-26)</h4><div class="indent"><p class="" style="">Specified creation of registry for TXT records and hardcoded txtvers record value at 1.</p> (psa)
    </div><h4>Version 0.11 (2007-03-14)</h4><div class="indent"><p class="" style="">Added section on capabilities discovery; added TXT records corresponding to the node, ver, and ext attributes from XEP-0115; changed textvers value to 2.</p> (psa)
    </div><h4>Version 0.10 (2007-03-13)</h4><div class="indent"><p class="" style="">Added nick TXT key; added note about use of AAAA records with IPv6; specified that from and to addresses are recommended for stream headers; specified that stream features should be sent.</p> (psa)
    </div><h4>Version 0.9 (2006-12-22)</h4><div class="indent"><p class="" style="">Updated the security considerations to recommend either TLS+SASL at the stream layer or encrypted sessions at the messaging layer.</p> (psa)
    </div><h4>Version 0.8 (2006-07-31)</h4><div class="indent"><p class="" style="">Recommended use of TLS and SASL for stream security.</p> (psa)
    </div><h4>Version 0.7 (2006-06-06)</h4><div class="indent"><p class="" style="">Further clarified internationalization considerations.</p> (psa)
    </div><h4>Version 0.6 (2006-06-05)</h4><div class="indent"><p class="" style="">Clarified internationalization considerations and use of mDNS in unicast mode for avatar retrieval.</p> (psa)
    </div><h4>Version 0.5 (2006-04-14)</h4><div class="indent"><p class="" style="">Specified presence name conflict resolution procedure, offline procedure, use of DNS NULL record for icons, and handling of multiple network interfaces.</p> (psa)
    </div><h4>Version 0.4 (2006-03-16)</h4><div class="indent"><p class="" style="">Corrected PTR format and client discovery process.</p> (psa)
    </div><h4>Version 0.3 (2006-02-23)</h4><div class="indent"><p class="" style="">Added more details about DNS setup and stream initiation; specified internationalization considerations.</p> (psa)
    </div><h4>Version 0.2 (2006-02-22)</h4><div class="indent"><p class="" style="">Corrected information about Service Instance Name format, p2pj port, and presence discovery process.</p> (psa)
    </div><h4>Version 0.1 (2006-02-09)</h4><div class="indent"><p class="" style="">Initial version; changed title to Link-Local Messaging.</p> (psa)
    </div><h4>Version 0.0.1 (2006-02-07)</h4><div class="indent"><p class="" style="">First draft.</p> (psa)
    </div></div><hr /><p>END</p></body></html>
