<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0146: Remote Controlling Clients</title><link rel="stylesheet" type="text/css" href="/xmpp.css" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><meta name="DC.Title" content="Remote Controlling Clients" /><meta name="DC.Creator" content="Remko Tron&#xE7;on" /><meta name="DC.Creator" content="Peter Saint-Andre" /><meta name="DC.Description" content="This document specifies recommended best practices for remote controlling clients using Ad-Hoc Commands." /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2006-03-23" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0146" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright (c) 1999 - 2008 by the XMPP Standards Foundation (XSF)." /></head><body><h1>XEP-0146: Remote Controlling Clients</h1><p>This document specifies recommended best practices for remote controlling clients using Ad-Hoc Commands.</p><hr /><p style="color:green">NOTICE: This Informational specification defines a best practice or protocol profile that has been approved by the XMPP Council and/or the XSF Board of Directors. Implementations are encouraged and the best practice or protocol profile is appropriate for deployment in production systems.</p><hr /><h2>Document Information</h2><p class="indent">
            Series: <a href="http://www.xmpp.org/extensions/">XEP</a><br />
            Number: 0146<br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status: 
            <a href="http://www.xmpp.org/extensions/xep-0001.html#states-Active">Active</a><br />
            Type:
            <a href="http://www.xmpp.org/extensions/xep-0001.html#types-Informational">Informational</a><br />
            Version: 1.0<br />
            Last Updated: 2006-03-23<br />
                Approving Body: <a href="http://www.xmpp.org/council/">XMPP Council</a><br />Dependencies: XMPP Core, XEP-0050<br />
                Supersedes: None<br />
                Superseded By: None<br />
            Short Name: rc<br />
              Wiki Page: &lt;<a href="http://wiki.jabber.org/index.php/Remote Controlling Clients (XEP-0146)">http://wiki.jabber.org/index.php/Remote Controlling Clients (XEP-0146)</a>&gt;
            </p><hr /><h2>Author Information</h2><div class="indent"><h3>Remko Tronçon</h3><p class="indent">
        Email:
        <a href="mailto:public@el-tramo.be">public@el-tramo.be</a><br />
        JabberID: 
        <a href="xmpp:public@el-tramo.be">public@el-tramo.be</a><br /></p><h3>Peter Saint-Andre</h3><p class="indent">
        JabberID: 
        <a href="xmpp:stpeter@jabber.org">stpeter@jabber.org</a><br />
        URI: 
        <a href="https://stpeter.im/">https://stpeter.im/</a><br /></p></div><hr /><h2>Legal Notices</h2><div class="indent"><h3>Copyright</h3>This XMPP Extension Protocol is copyright (c) 1999 - 2008 by the XMPP Standards Foundation (XSF).<h3>Permissions</h3>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h3>Disclaimer of Warranty</h3><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. In no event shall the XMPP Standards Foundation or the authors of this Specification be liable for any claim, damages, or other liability, whether in an action of contract, tort, or otherwise, arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification. ##</span><h3>Limitation of Liability</h3>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising out of the use or inability to use the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h3>IPR Conformance</h3>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which may be found at &lt;<a href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt; or obtained by writing to XSF, P.O. Box 1641, Denver, CO 80201 USA).</div><hr /><h2>Discussion Venue</h2><p class="indent">The preferred venue for discussion of this document is the Standards discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">http://mail.jabber.org/mailman/listinfo/standards</a>&gt;.</p><p class="indent">Errata may be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><h2>Relation to XMPP</h2><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h2>Conformance Terms</h2><p class="indent">The following keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#intro">Introduction</a><br />2.  <a href="#reqs">Requirements</a><br />3.  <a href="#disco">Discovery</a><br />4.  <a href="#usecases">Use Cases</a><br />   
      4.1.  <a href="#set-status">Change Status</a><br />   
      4.2.  <a href="#forward">Forward Unread Messages Residing at a Remote Client</a><br />   
      4.3.  <a href="#sect-id2261079">Change Run-Time Options</a><br />   
      4.4.  <a href="#sect-id2261216">Accept Pending File Transfer Requests</a><br />   
      4.5.  <a href="#sect-id2261267">Leave Groupchats</a><br />5.  <a href="#errors">Error Handling</a><br />6.  <a href="#implementation">Implementation Notes</a><br />7.  <a href="#security">Security Considerations</a><br />8.  <a href="#iana">IANA Considerations</a><br />9.  <a href="#registrar">XMPP Registrar Considerations</a><br />   
      9.1.  <a href="#registrar-protocol">Protocol Namespaces</a><br />   
      9.2.  <a href="#registrar-formtype">Field Standardization</a><br />10.  <a href="#sect-id2261825">XML Schema</a><br /><a href="#notes">Notes</a><br /><a href="#revs">Revision History</a></p></div><hr /><h2>1.
       <a name="intro" id="intro">Introduction</a></h2>
    <p class="" style="">
    When one has multiple clients at different locations logged in 
    simultaneously, it is often desirable to control these clients from 
    the client you are currently using. There are a number of common tasks
    one might want to perform remotely on clients: change the status of the
    client, forward all received unread messages to this client, and so on.
    Therefore, it makes sense to define a protocol for performing these tasks.
    </p>
    
    <p class="" style="">
    This document describes a protocol to perform a set of common tasks on a
    remote client, by specifying a profile of <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0050.html">Ad-Hoc Commands</a></span>  [<a href="#nt-id2252654">1</a>].
    </p>
<h2>2.
       <a name="reqs" id="reqs">Requirements</a></h2>
    <p class="" style="">This document addresses the following requirements:</p>
    <ul class="" style="">
        <li class="" style="">Enable users to perform a set of common tasks on a remote 
            client.</li>
        <li class="" style="">Re-use existing XMPP and Jabber protocols wherever possible.</li>
    </ul>
<h2>3.
       <a name="disco" id="disco">Discovery</a></h2>
    <p class="" style="">A client MUST advertise any remote controlling commands it supports via 
    <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0030.html">Service Discovery</a></span>  [<a href="#nt-id2252726">2</a>] (as described in <span class="strong">XEP-0050: Ad-Hoc Commands</span>).
    <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0115.html">Entity Capabilities</a></span>  [<a href="#nt-id2251300">3</a>] can be used to query capability of remote controlling commands
    in a client.
    </p>
<h2>4.
       <a name="usecases" id="usecases">Use Cases</a></h2>
    <p class="" style="">This document defines a profile of <span class="strong">XEP-0050: Ad-Hoc Commands</span>
    that enables a user to perform the following tasks on a remote client:</p>
    <ol start="" class="" style="">
        <li class="" style="">Change status</li>
        <li class="" style="">Forward unread messages residing at the remote client to the
        local client</li>
        <li class="" style="">Change run-time options</li>
        <li class="" style="">Accept pending file transfer requests</li>
        <li class="" style="">Leave groupchats</li>
    </ol>
	<p class="" style="">
	Although this document aims to define common use cases for remote controlling clients,
	an implementation or deployment MAY support any subset and MAY support additional
	commands not defined herein.
	</p>
    <p class="" style=""><span class="em">Note: The text that follows assumes that implementors have read and understood <span class="strong">XEP-0050: Ad-Hoc Commands</span></span>.</p>


    <div class="indent"><h3>4.1 <a name="set-status" id="set-status">Change Status</a></h3>
        <p class="" style="">It is common to forget changing the status of a resource when leaving the
		client for a longer period. When realizing this while at another location, it 
		might be desirable to change the status from there, to avoid contacts 
		thinking that resource is attended and sending it messages.</p>
		<p class="caption"><a name="example-1" id="example-1"></a>Example 1. Local Client Requests to Set the Status of a Remote Client</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='set-status-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/rc#set-status'/&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="" style="">Unless an error occurs (see the 
        <a href="#errors">Error Handling</a> section below), the service 
        SHOULD return the appropriate form.</p>
        
        <p class="caption"><a name="example-2" id="example-2"></a>Example 2. Remote Client Replies with a Form to Set its Status</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='set-status-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
             node='http://jabber.org/protocol/rc#set-status'
             sessionid='set-status:20040727T0337Z'
             status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Change Status&lt;/title&gt;
      &lt;instructions&gt;Choose the status and status message&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/rc&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Status' 
             type='list-single' 
             var='status'&gt;
        &lt;required/&gt;
        &lt;value&gt;online&lt;/value&gt;
        &lt;option label='Chat'&gt; 
            &lt;value&gt;chat&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='Online'&gt; 
            &lt;value&gt;online&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='Away'&gt; 
            &lt;value&gt;away&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='Extended Away'&gt; 
            &lt;value&gt;xa&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='Do Not Disturb'&gt; 
            &lt;value&gt;dnd&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='Invisible'&gt; 
            &lt;value&gt;invisible&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='Offline'&gt; 
            &lt;value&gt;offline&lt;/value&gt;
        &lt;/option&gt;
      &lt;/field&gt;
      &lt;field label='Priority'
             type='text-single'
             var='status-priority'&gt;
        &lt;value&gt;5&lt;/value&gt; 
      &lt;/field&gt;
      &lt;field label='Message' 
             type='text-multi' 
             var='status-message'/&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="caption"><a name="example-3" id="example-3"></a>Example 3. Local Client Submits Set Status Form to Remote Client</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='set-status-2'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/rc#set-status'
           sessionid='set-status:20040727T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/rc&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='list-single' var='status'&gt;
        &lt;value&gt;xa&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='text-single' var='status-priority'&gt;
        &lt;value&gt;-1&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='text-multi' var='status-message'&gt;
        &lt;value&gt;In my chamber.&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="" style="">If the 'status-priority' variable is omitted, the client SHOULD NOT
        change the priority of the client</p>
        <p class="caption"><a name="example-4" id="example-4"></a>Example 4. Remote Client Informs Local Client of Completion</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='set-status-2'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
           node='http://jabber.org/protocol/rc#set-status'
           sessionid='set-status:20040727T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="" style="">Notification of completion MAY include the processed data in a data 
        form of type 'result'.</p>
    </div>


    <div class="indent"><h3>4.2 <a name="forward" id="forward">Forward Unread Messages Residing at a Remote Client</a></h3>
        <p class="" style="">A user might want to forward all the unread messages residing at
        the remote client to the local client (e.g. when the remote client was
        accidentally left on-line, and has received messages in the meantime).</p>
        
        For example, suppose Romeo sends a message to Juliet, thinking she is
        still on her balcony. The balcony client receives the message:
        <p class="caption"><a name="example-5" id="example-5"></a>Example 5. Remote Client Receives Message</p><div class="indent"><pre>
&lt;message from='romeo@example.com/orchard' 
         to='juliet@example.com/balcony'&gt;
  &lt;subject&gt;Just saying hi&lt;/subject&gt;
  &lt;body&gt;Hello Juliet!&lt;/body&gt;
&lt;/message&gt;
        </pre></div>

        However, Juliet is in her chamber, so she doesn't know about the message
        (yet). Realizing she left her balcony client unattended, she sends a 
        request to the remote client to forward all unread messages.

        <p class="caption"><a name="example-6" id="example-6"></a>Example 6. Local Client Requests to Forward Unread Messages Currently Residing at the Remote Client</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='forward-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/rc#forward'
           sessionid='forward:20040727T0337Z'/&gt;
&lt;/iq&gt;
        </pre></div>
        
        The client forwards all unread messages to the local client, adding
        information about the origin of the message (using the 'ofrom' 
		<span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0033.html">Extended Stanza Addressing</a></span>  [<a href="#nt-id2261058">4</a>] address). 
		The chamber client receives both these messages and a
        confirmation that the command was completed.
        <p class="caption"><a name="example-7" id="example-7"></a>Example 7. Remote Client Forwards All Unread Messages to Local Client</p><div class="indent"><pre>
&lt;message from='juliet@example.com/balcony' 
         to='juliet@example.com/chamber'&gt;
  &lt;subject&gt;Just saying hi&lt;/subject&gt;
  &lt;body&gt;Hello Juliet!&lt;/body&gt;
  &lt;addresses xmlns='http://jabber.org/protocol/address'&gt;
    &lt;address type='ofrom' jid='romeo@example.com/orchard'/&gt;
  &lt;/addresses&gt;  
&lt;/message&gt;
        </pre></div>

        <p class="caption"><a name="example-8" id="example-8"></a>Example 8. Remote Client Informs Local Client of Completion</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='forward-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
           node='http://jabber.org/protocol/rc#forward'
           sessionid='forward:20040727T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
        </pre></div>

		A client MAY provide a more fine-grained implementation, e.g. by
		presenting the requester an extra form to select which messages
		have to be forwarded.
    </div>


    <div class="indent"><h3>4.3 <a name="sect-id2261079" id="sect-id2261079">Change Run-Time Options</a></h3>
        <p class="" style="">It might be desirable to remotely set some run-time options of
        a client. For example, when neighbours complain about the sounds your 
        client makes while you're at another location, you could turn the 
        sounds off at the remote client.
        </p>
		<p class="caption"><a name="example-9" id="example-9"></a>Example 9. Local Client Requests to Change Options of a Remote Client</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='set-options-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/rc#set-options'/&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="" style="">Unless an error occurs (see the 
        <a href="#errors">Error Handling</a> section below), the service 
        SHOULD return the appropriate form.</p>
        
		<p class="caption"><a name="example-10" id="example-10"></a>Example 10. Remote Client Replies with a Form to Set its Options</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='set-options-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
             node='http://jabber.org/protocol/rc#set-options'
             sessionid='set-options:20040727T0337Z'
             status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Set Options&lt;/title&gt;
      &lt;instructions&gt;Set the desired options&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/rc&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Play sounds' 
             type='boolean' 
             var='sounds'&gt;
        &lt;value&gt;1&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Automatically Go Offline when Idle' 
             type='boolean' 
             var='auto-offline'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Automatically Open New Messages' 
             type='boolean' 
             var='auto-msg'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Automatically Accept File Transfers' 
             type='boolean' 
             var='auto-files'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Automatically Authorize Contacts' 
             type='boolean' 
             var='auto-auth'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="caption"><a name="example-11" id="example-11"></a>Example 11. Local Client Submits Set Options Form to Remote Client</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='set-options-2'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/rc#set-options'
           sessionid='set-options:20040727T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/rc&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='boolean' var='sounds'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='boolean' var='auto-offline'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='boolean' var='auto-msg'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='boolean' var='auto-files'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='boolean' var='auto-auth'&gt;
        &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="" style="">The remote client sets the values of the options to their requested
		value. If a variable is omitted, the client SHOULD NOT change the value of the 
		corresponding option.</p>

        <p class="caption"><a name="example-12" id="example-12"></a>Example 12. Remote Client Informs Local Client of Completion</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='set-options-2'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
           node='http://jabber.org/protocol/rc#set-options'
           sessionid='set-options:20040727T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="" style="">Notification of completion MAY include the processed data in a data 
        form of type 'result'.</p>
    </div>


	

    <div class="indent"><h3>4.4 <a name="sect-id2261216" id="sect-id2261216">Accept Pending File Transfer Requests</a></h3>
        <p class="caption"><a name="example-13" id="example-13"></a>Example 13. Local Client Requests to Accept Pending File Transfer Requests on the Remote Client</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='accept-files-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/rc#accept-files'/&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="" style="">Unless an error occurs (see the 
        <a href="#errors">Error Handling</a> section below), the service 
        SHOULD return the appropriate form.</p>
        
        <p class="caption"><a name="example-14" id="example-14"></a>Example 14. Remote Client Replies with a Form Containing Pending File Transfers</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='accept-files-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
             node='http://jabber.org/protocol/rc#accept-files'
             sessionid='set-status:20040727T0337Z'
             status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Pending File Transfers&lt;/title&gt;
      &lt;instructions&gt;Select the pending file transfers to accept&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/rc&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Files' 
             type='list-multi' 
             var='files'&gt;
        &lt;required/&gt;
        &lt;option label='ballad.ogg (romeo@example.com)'&gt; 
          &lt;value&gt;romeo@example.com/orchard:1&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='picture.jpg (romeo@example.com)'&gt; 
          &lt;value&gt;romeo@example.com/orchard:2&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='challenge.txt (mercutio@example.com)'&gt; 
          &lt;value&gt;mercutio@example.com/orchard:1&lt;/value&gt;
        &lt;/option&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="caption"><a name="example-15" id="example-15"></a>Example 15. Local Client Submits Form to Remote Client</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='accept-files-2'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/rc#accept-files'
           sessionid='accept-files:20040727T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/rc&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='list-multi' var='files'&gt;
        &lt;value&gt;romeo@example.com/orchard:2&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
        </pre></div>

        The remote client accepts the selected file transfers, and informs
        the local client of completion.
        <p class="caption"><a name="example-16" id="example-16"></a>Example 16. Remote Client Informs Local Client of Completion</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='accept-files-2'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
           node='http://jabber.org/protocol/rc#accept-files'
           sessionid='accept-files:20040727T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
        </pre></div>
    </div>



    <div class="indent"><h3>4.5 <a name="sect-id2261267" id="sect-id2261267">Leave Groupchats</a></h3>
		<p class="caption"><a name="example-17" id="example-17"></a>Example 17. Local Client Requests the Remote Client to Leave Groupchats</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='leave-groupchats-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           action='execute'
           node='http://jabber.org/protocol/rc#leave-groupchats'/&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="caption"><a name="example-18" id="example-18"></a>Example 18. Remote Client Replies with a Form with a List of Groupchats it is currently in</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='leave-groupchats-1'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
             node='http://jabber.org/protocol/rc#leave-groupchats'
             sessionid='leave-groupchats:20040727T0337Z'
             status='executing'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;title&gt;Leave Groupchats&lt;/title&gt;
      &lt;instructions&gt;Choose the groupchats you want to leave&lt;/instructions&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/rc&lt;/value&gt;
      &lt;/field&gt;
      &lt;field label='Groupchats' 
             type='list-multi' 
             var='groupchats'&gt;
        &lt;required/&gt;
        &lt;option label='juliet on jdev@conference.jabber.org'&gt; 
            &lt;value&gt;jdev@conference.jabber.org/juliet&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='juliette on jdev@conference.jabber.org'&gt; 
            &lt;value&gt;jdev@conference.jabber.org/juliette&lt;/value&gt;
        &lt;/option&gt;
        &lt;option label='juliet on girlsonly@jabber.com'&gt; 
            &lt;value&gt;girlsonly@jabber.com/juliet&lt;/value&gt;
        &lt;/option&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
        </pre></div>
        <p class="caption"><a name="example-19" id="example-19"></a>Example 19. Local Client Submits Form to Remote Client</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/chamber'
    to='juliet@example.com/balcony'
    type='set'
    id='leave-groupchats-2'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/rc#leave-groupchats'
           sessionid='leave-groupchats:20040727T0337Z'&gt;
    &lt;x xmlns='jabber:x:data' type='form'&gt;
      &lt;field type='hidden' var='FORM_TYPE'&gt;
        &lt;value&gt;http://jabber.org/protocol/rc&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type='list-multi' var='groupchats'&gt;
        &lt;value&gt;jdev@conference.jabber.org/juliet&lt;/value&gt;
        &lt;value&gt;girlsonly@jabber.com/juliet&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;
        </pre></div>
		<p class="" style="">The remote client leaves the requested groupchats, and informs the
		local client of completion.</p>
        <p class="caption"><a name="example-20" id="example-20"></a>Example 20. Remote Client Informs Local Client of Completion</p><div class="indent"><pre>
&lt;iq from='juliet@example.com/balcony' 
    to='juliet@example.com/chamber' 
    type='result' 
    id='leave-groupchats-2'
    xml:lang='en'&gt;
  &lt;command xmlns='http://jabber.org/protocol/commands'
           node='http://jabber.org/protocol/rc#leave-groupchats'
           sessionid='leave-groupchats:20040727T0337Z'
           status='completed'/&gt;
&lt;/iq&gt;
        </pre></div>
    </div>
<h2>5.
       <a name="errors" id="errors">Error Handling</a></h2> 
    <p class="" style="">Several error conditions are possible when an entity sends a command
    request to the service, as defined in the following table. If one of these
    errors occurs, the service MUST return an error stanza to the requesting
    entity.</p>

    <p class="caption"><a name="table-1" id="table-1"></a>Table 1: Error Conditions</p><table border="1" cellpadding="3" cellspacing="0">
        <tr class="body">
            <th colspan="" rowspan="">Condition</th>
            <th colspan="" rowspan="">Cause</th>
        </tr>
        
        <tr class="body">
            <td colspan="" rowspan="">&lt;feature-not-implemented/&gt;</td>
            <td colspan="" rowspan="">The specific command is not supported (even though the ad-hoc
            commands protocol is)</td>
        </tr>
        <tr class="body">
            <td colspan="" rowspan="">&lt;forbidden/&gt;</td>
            <td colspan="" rowspan="">The requesting entity does not have sufficient privileges to 
            perform the command</td>
        </tr>
        <tr class="body">
            <td colspan="" rowspan="">&lt;service-unavailable/&gt;</td>
            <td colspan="" rowspan="">The ad-hoc commands protocol is not supported</td>
        </tr>
    </table>
      
    <p class="" style="">For the syntax of these errors, see <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0086.html">Error Condition Mappings</a></span>  [<a href="#nt-id2261674">5</a>]. Naturally, other errors
    may be returned as well.</p>
<h2>6.
       <a name="implementation" id="implementation">Implementation Notes</a></h2> 
    <p class="" style="">Implementations of this protocol MAY add or remove fields to forms as
    they see fit.  For example, when setting the status of a remote client that
    supports multiple accounts, the client may choose to add a boolean field 
    to allow the user to specify whether the status change should be applied
    globally or only to the receiving account.</p>

    <p class="" style=""> Implementations MAY also introduce extra forms for commands. For example,
    when forwarding unread messages, a client could return a form containing a 
    list 
    of short descriptions of unread messages, allowing the user to select the
    messages he wants to forward.</p>
<h2>7.
       <a name="security" id="security">Security Considerations</a></h2>
      <p class="" style="">The ability to complete the tasks specified herein MUST NOT be granted
      to users who lack privileges to control a client. A sensible 
      access policy is to only allow remote controlling by other 
      resources of the same account used by the client. If other accounts
      are to be able to remote control the client, the client needs more 
      complex access right management.</p>
<h2>8.
       <a name="iana" id="iana">IANA Considerations</a></h2>
  <p class="" style="">This document requires no interaction with the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-id2261769">6</a>].</p>
<h2>9.
       <a name="registrar" id="registrar">XMPP Registrar Considerations</a></h2>
    
    <div class="indent"><h3>9.1 <a name="registrar-protocol" id="registrar-protocol">Protocol Namespaces</a></h3>
        <p class="" style="">The XMPP Registrar includes 'http://jabber.org/protocol/rc' in its registry
        of protocol namespaces (see &lt;<a href="http://www.xmpp.org/registrar/namespaces.html">http://www.xmpp.org/registrar/namespaces.html</a>&gt;).</p>
    </div>

    <div class="indent"><h3>9.2 <a name="registrar-formtype" id="registrar-formtype">Field Standardization</a></h3>
        <p class="" style=""><span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0068.html">Field Standardization for Data Forms</a></span>  [<a href="#nt-id2261850">7</a>] defines a process for standardizing the fields used within
        Data Forms scoped by a particular namespace (see also &lt;<a href="http://www.xmpp.org/registrar/formtypes.html">http://www.xmpp.org/registrar/formtypes.html</a>&gt;). 
        The reserved fields for the 'http://jabber.org/protocol/rc' namespace 
        are specified below.</p>
        <p class="caption">Registry Submission</p><div class="indent"><pre>
&lt;form_type&gt;
  &lt;name&gt;http://jabber.org/protocol/rc&lt;/name&gt;
  &lt;doc&gt;XEP-0146&lt;/doc&gt;
  &lt;desc&gt;Forms used for remote controlling clients&lt;/desc&gt;
  &lt;field var='auto-auth'
         type='boolean'
         label='Whether to automatically authorize subscription requests'/&gt;
  &lt;field var='auto-files'
         type='boolean'
         label='Whether to automatically accept file transfers'/&gt;
  &lt;field var='auto-msg'
         type='boolean'
         label='Whether to automatically open new messages'/&gt;
  &lt;field var='auto-offline'
         type='boolean'
         label='Whether to automatically go offline when idle'/&gt;
  &lt;field var='sounds'
         type='boolean'
         label='Whether to play sounds'/&gt;
  &lt;field var='files'
         type='list-multi'
         label='A list of pending file transfers'/&gt;
  &lt;field var='groupchats'
         type='list-multi'
         label='A list of joined groupchat rooms'/&gt;
  &lt;field var='status'
         type='list-single'
         label='A presence or availability status'&gt;
    &lt;option label='Chat'&gt; 
        &lt;value&gt;chat&lt;/value&gt;
    &lt;/option&gt;
    &lt;option label='Online'&gt; 
        &lt;value&gt;online&lt;/value&gt;
    &lt;/option&gt;
    &lt;option label='Away'&gt; 
        &lt;value&gt;away&lt;/value&gt;
    &lt;/option&gt;
    &lt;option label='Extended Away'&gt; 
        &lt;value&gt;xa&lt;/value&gt;
    &lt;/option&gt;
    &lt;option label='Do Not Disturb'&gt; 
        &lt;value&gt;dnd&lt;/value&gt;
    &lt;/option&gt;
    &lt;option label='Invisible'&gt; 
        &lt;value&gt;invisible&lt;/value&gt;
    &lt;/option&gt;
    &lt;option label='Offline'&gt; 
        &lt;value&gt;offline&lt;/value&gt;
    &lt;/option&gt;
  &lt;/field&gt;
  &lt;field var='status-message'
         type='text-multi'
         label='The status message text'/&gt;
  &lt;field var='status-priority'
         type='text-single'
         label='The new priority for the client'/&gt;
&lt;/form_type&gt;
    </pre></div>
  </div>
<h2>10.
       <a name="sect-id2261825" id="sect-id2261825">XML Schema</a></h2>
    <p class="" style="">Because the protocol defined here is a profile of <span class="strong">XEP-0050: Ad-Hoc Commands</span>, no schema definition is needed.</p>
<hr /><h2><a name="notes" id="notes"></a>Notes</h2><div class="indent"><p><a name="nt-id2252654" id="nt-id2252654">1</a>. XEP-0050: Ad-Hoc Commands &lt;<a href="http://www.xmpp.org/extensions/xep-0050.html">http://www.xmpp.org/extensions/xep-0050.html</a>&gt;.</p><p><a name="nt-id2252726" id="nt-id2252726">2</a>. XEP-0030: Service Discovery &lt;<a href="http://www.xmpp.org/extensions/xep-0030.html">http://www.xmpp.org/extensions/xep-0030.html</a>&gt;.</p><p><a name="nt-id2251300" id="nt-id2251300">3</a>. XEP-0115: Entity Capabilities &lt;<a href="http://www.xmpp.org/extensions/xep-0115.html">http://www.xmpp.org/extensions/xep-0115.html</a>&gt;.</p><p><a name="nt-id2261058" id="nt-id2261058">4</a>. XEP-0033: Extended Stanza Addressing &lt;<a href="http://www.xmpp.org/extensions/xep-0033.html">http://www.xmpp.org/extensions/xep-0033.html</a>&gt;.</p><p><a name="nt-id2261674" id="nt-id2261674">5</a>. XEP-0086: Error Condition Mappings &lt;<a href="http://www.xmpp.org/extensions/xep-0086.html">http://www.xmpp.org/extensions/xep-0086.html</a>&gt;.</p><p><a name="nt-id2261769" id="nt-id2261769">6</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p><p><a name="nt-id2261850" id="nt-id2261850">7</a>. XEP-0068: Field Data Standardization for Data Forms &lt;<a href="http://www.xmpp.org/extensions/xep-0068.html">http://www.xmpp.org/extensions/xep-0068.html</a>&gt;.</p></div><hr /><h2><a name="revs" id="revs"></a>Revision History</h2><div class="indent"><h4>Version 1.0 (2006-03-23)</h4><div class="indent"><p class="" style="">Per a vote of the Jabber Council, advanced to Active.</p> (psa)
    </div><h4>Version 0.3 (2006-01-25)</h4><div class="indent">Using XEP-0033 (Extended Stanza Addressing) for Forwarding 
		use case. (rt)
    </div><h4>Version 0.2 (2005-03-16)</h4><div class="indent">Minor modifications; completed Set Options use case; completed Leave Groupchats use case. (rt)
    </div><h4>Version 0.1 (2004-11-12)</h4><div class="indent">Initial version. (rt)
    </div></div><hr /><p>END</p></body></html>
