<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0026: Internationalization (I18N)</title><link rel="stylesheet" type="text/css" href="/xmpp.css" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><meta name="DC.Title" content="Internationalization (I18N)" /><meta name="DC.Creator" content="Max Horn" /><meta name="DC.Description" content="NOTE WELL: this document was retracted on 2003-11-05 since the topic is addressed definitively in XMPP Core. Please refer to XMPP Core for further information." /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2003-11-05" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0026" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright (c) 1999 - 2008 by the XMPP Standards Foundation (XSF)." /></head><body><h1>XEP-0026: Internationalization (I18N)</h1><p>NOTE WELL: this document was retracted on 2003-11-05 since the topic is addressed definitively in XMPP Core. Please refer to XMPP Core for further information.</p><hr /><p style="color:red">WARNING: This document has been retracted by the author(s). Implementation of the protocol described herein is not recommended. Developers desiring similar functionality should implement the protocol that supersedes this one (if any).</p><hr /><h2>Document Information</h2><p class="indent">
            Series: <a href="http://www.xmpp.org/extensions/">XEP</a><br />
            Number: 0026<br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status: 
            <a href="http://www.xmpp.org/extensions/xep-0001.html#states-Retracted">Retracted</a><br />
            Type:
            <a href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br />
            Version: 0.2<br />
            Last Updated: 2003-11-05<br />
                Approving Body: <a href="http://www.xmpp.org/council/">XMPP Council</a><br />
                Dependencies: None<br />
                Supersedes: None<br />
                Superseded By: None<br />
            Short Name: N/A<br />
              Wiki Page: &lt;<a href="http://wiki.jabber.org/index.php/Internationalization (I18N) (XEP-0026)">http://wiki.jabber.org/index.php/Internationalization (I18N) (XEP-0026)</a>&gt;
            </p><hr /><h2>Author Information</h2><div class="indent"><h3>Max Horn</h3><p class="indent">
        Email:
        <a href="mailto:max@quendi.de">max@quendi.de</a><br />
        JabberID: 
        <a href="xmpp:black_fingolfin@jabber.org">black_fingolfin@jabber.org</a><br /></p></div><hr /><h2>Legal Notices</h2><div class="indent"><h3>Copyright</h3>This XMPP Extension Protocol is copyright (c) 1999 - 2008 by the XMPP Standards Foundation (XSF).<h3>Permissions</h3>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h3>Disclaimer of Warranty</h3><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. In no event shall the XMPP Standards Foundation or the authors of this Specification be liable for any claim, damages, or other liability, whether in an action of contract, tort, or otherwise, arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification. ##</span><h3>Limitation of Liability</h3>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising out of the use or inability to use the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h3>IPR Conformance</h3>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which may be found at &lt;<a href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt; or obtained by writing to XSF, P.O. Box 1641, Denver, CO 80201 USA).</div><hr /><h2>Discussion Venue</h2><p class="indent">The preferred venue for discussion of this document is the Standards discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">http://mail.jabber.org/mailman/listinfo/standards</a>&gt;.</p><p class="indent">Errata may be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><h2>Relation to XMPP</h2><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><h2>Conformance Terms</h2><p class="indent">The following keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#sect-id2252761">Introduction</a><br />2.  <a href="#sect-id2252676">Implementation</a><br />   
      2.1.  <a href="#sect-id2252695">Encoding the locale</a><br />   
      2.2.  <a href="#sect-id2251302">Client support</a><br />   
      2.3.  <a href="#sect-id2251407">Server support</a><br />   
      2.4.  <a href="#sect-id2251487">Service support</a><br /><a href="#notes">Notes</a><br /><a href="#revs">Revision History</a></p></div><hr /><h2>1.
       <a name="sect-id2252761" id="sect-id2252761">Introduction</a></h2>
	 <p class="" style="">
	 	Jabber is meant to allow people everywhere in the world to communicate
		with each other. However, people converse in many different languages, not just
		English. Many humans in fact don't even understand English. Hence,
		Jabber should not be tied to  a particular language, but rather allow
		usage of any language, be it English, Chinese, Inuit, or anything else.
	</p>
	<p class="" style="">
		One important step towards this goal is that Jabber is based upon
		Unicode, allowing for many different languages. But that alone is not
		enough. Jabber promotes a server-based system for many of its
		components and services, like the JUD, or transports. Many of these have
		to interact with users in some way. Currently, they do so in only one
		fixed language (usually English). Even if the server admin is willing
		to translate the messages, forms, etc. involved, there can only be one
		localization active for a given server/component.
	</p>
	<p class="" style="">
		Hence, Jabber must support a way for clients to inform the server about
		their preferred language. In addition, the server and other components
		have to understand and honor this information. Only this way can we
		ensure that Jabber is able to work in a multi-national, multi-lingual
		environment.
	</p>
	<p class="" style="">
		Some examples on how this information could and should be used, include
	</p>
	<ul class="" style="">
		<li class="" style="">Forms (e.g. for registration or searching, refer also to <span class="ref" style=""><a href="http://www.xmpp.org/extensions/xep-0004.html">Data Forms</a></span>  [<a href="#nt-id2252630">2</a>]) can be localized, so that instructions and field labels are in the native language of the person who has to fill them out</li>
		<li class="" style="">Even if the form can't be sent in the proper language (e.g. simply because it hasn't yet been translated), the component still should tag its reply with the language being used</li>
		<li class="" style="">Incoming messages in a different language could be automatically translated (server-side or client-side)</li>
		<li class="" style="">Redirection of messages based on their language (think of a help desk which services world wide requests)</li>
		<li class="" style="">Transports to services which are not unicode based could use the language information as a hint at the best encoding (least lossage) for converted messages</li>
	</ul>
<h2>2.
       <a name="sect-id2252676" id="sect-id2252676">Implementation</a></h2>
	<p class="" style="">
		The basic idea behind this proposal was to use existing standards where possible, and to make it fully backward compatible. Furthermore it was a goal to allow clients to support it now, even without any server support, while at the same time permitting improved functionality once servers start to implement this spec.
	</p>

	<div class="indent"><h3>2.1 <a name="sect-id2252695" id="sect-id2252695">Encoding the locale</a></h3>
		<p class="" style="">To encode the locale on any given XML packet, we use the xml:lang attribute, as defined in the <a href="http://www.w3.org/TR/REC-xml#sec-lang-tag">XML specification</a>. This in turn uses values as specified in <a href="http://www.ietf.org/rfc/rfc1766.txt">RFC 1766</a> to encode languages and regions. This way, you can even distinguish between British and Australian English.
		</p>
		<p class="caption"><a name="example-1" id="example-1"></a>Example 1. Example message with locale set to German</p><div class="indent"><pre>
&lt;message to='friedrich@jabber.org' xml:lang='de-DE'&gt;
  &lt;body'&gt;Ich bin ein Berliner!&lt;/body'&gt;
&lt;/message&gt;  </pre></div>
		<p class="" style="">
			An xml:lang tag can be put onto any XML element; for the purposes of this document, however, we will limit its usage to the four central Jabber elements: &lt;stream/&gt;, &lt;message/&gt;, &lt;iq/&gt; and &lt;presence/&gt;.
		</p>
	</div>
	
	<div class="indent"><h3>2.2 <a name="sect-id2251302" id="sect-id2251302">Client support</a></h3>
		<p class="" style="">
			A client claiming to support this document has to initiate server connection slightly differently by putting an xml:lang attribute in the initial &lt;stream:stream&gt; element.
		</p>
		<p class="caption"><a name="example-2" id="example-2"></a>Example 2. Jabber session initiated with Canadian French as default</p><div class="indent"><pre>
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;stream:stream to='jabber.org' xmlns='jabber:client'
          xmlns:stream='http://etherx.jabber.org/streams' xml:lang='fr-CA'&gt; </pre></div>
		<p class="" style="">
			Servers not supporting this document will just ignore the additional attribute. Compliant server can be distinguished by the fact that their reply &lt;stream:stream&gt; element also contains an xml:lang attribute, indicating the main language of the server. A compliant client has to detect whether the server is compliant or not, and base its future behavior on this information.
		</p>
		<p class="caption"><a name="example-3" id="example-3"></a>Example 3. Reply by an English-language Jabber server</p><div class="indent"><pre>
&lt;stream:stream from='jabber.org' id='12345' xmlns='jabber:client'
          xmlns:stream='http://etherx.jabber.org/streams' xml:lang='en'&gt; </pre></div>
		<p class="" style="">
			If the client thus determines that the server is compliant, then it doesn't have to do anything beyond this point. All its outgoing messages will automatically be flagged by the server with an xml:lang attribute if necessary. Thus writing a minimal compliant client is trivial.
		</p>
		<p class="" style="">
			If it is determined that the server does not support this document, and the client still wants to offer locale support, it may start flagging all its outgoing message/iq/presence elements with the xml:lang attribute, to ensure that other components/clients which do conform to this document can handle the localization despite the local server not doing so.
		</p>
		<p class="" style="">
			Finally, if for whatever reasons the client wants to flag particular messages with a different locale (e.g. if the user is bilingual), it can do so at any time by putting an appropriate xml:lang element in the outgoing data. This will override the previously set default locale for this message only.
		</p>
	</div>

	
	<div class="indent"><h3>2.3 <a name="sect-id2251407" id="sect-id2251407">Server support</a></h3>
		<p class="" style="">
			A compliant server must detect the xml:lang attribute in incoming &lt;stream:stream&gt; elements. The server then has to store this information for later use, i.e. it has to remember the default language for each active session. 
		</p>
		<p class="" style="">
			Additionally, a compliant server must attach an xml:lang attribute to the reply &lt;stream:stream&gt; element sent in response to a newly initiated connection. This attribute should reflect the default language of that server, and is used to indicate to clients that the server implements this document.
		</p>
		<p class="" style="">
			The server should not only allow user clients to specify a default language this way, but also server-side components, like the JUD should be allowed to do this.
		</p>
		<p class="" style="">
			Whenever a message leave the server, it has to tag the message automatically with the xml:lang attribute of the corresponding seesion, if any was specified, unless the message is already tagged this way. In that case, the already existing xml:lang attribute takes precedence, thus allowing for greater flexibility.
		</p>
		<p class="" style="">
			If a client send a message to another local client which uses the same xml:lang value, then no change is applied. But if the recipient uses a different xml:lang, and if the message has no xml:lang attribute attached yet, the xml:lang of the server has to be attached before delievey of the message.
		</p>
	</div>

	
	<div class="indent"><h3>2.4 <a name="sect-id2251487" id="sect-id2251487">Service support</a></h3>
		<p class="" style="">
			Jabber based services that wish to comply to this document have to make sure that all information they send to clients is tagged with an xml:lang attribute corresponding to the language used in the outgoing data, if appropriate, even if the component supports no other localizations. An example for this is a search form based on <span class="ref">XEP-0004</span>.
		</p>
		<p class="caption"><a name="example-4" id="example-4"></a>Example 4. Search form in English</p><div class="indent"><pre>
&lt;iq from='users.jabber.org' type='result' id='4' xml:lang='en'&gt;
  &lt;query xmlns='jabber:iq:search'&gt;
    &lt;instructions&gt;
        Fill in a field to search for any matching Jabber users.
    &lt;/instructions&gt;
    &lt;nick/&gt;
    &lt;first/&gt;
    &lt;last/&gt;
    &lt;email/&gt;

    &lt;x xmlns='jabber:x:data'&gt;
      &lt;instructions&gt;
          To search for a user fill out at least one 
          of the fields below and submit the form.
      &lt;/instructions&gt;
      &lt;field type='text-single' label='First (Given)' var='first'/&gt;
      &lt;field type='text-single' label='Last (Family)' var='last'/&gt;
      &lt;field type='text-single' label='Nick (Alias)' var='nick'/&gt;
      &lt;field type='text-single' label='Email' var='email'/&gt;
    &lt;/x&gt;
  &lt;/query&gt;
&lt;/iq&gt; </pre></div>
		<p class="" style="">
			This way, a client could for example offer to translate the form since it now knows the language the form was written in. Previously it could just guess the language was English, which never was guaranteed.
		</p>
     	<p class="" style="">
     		To be able to tailor replies to the user's preferred language, the component has to know this information. This is simply inferred from any xml:lang attribute on incoming requests. If none is present, the default locale is assumed. If the client's default locale diverges from that of the component, it is the server's responsibility to tag the query with an appropriate xml:lang attribute (refer to the "Server support" section). If on the other hand the server is not compliant, then any interested client will manually tag its queries with an xml:lang attribute. Thus it is sufficient to check for this attribute.
     	</p>
		<p class="caption"><a name="example-5" id="example-5"></a>Example 5. Request for a German-language search form</p><div class="indent"><pre>
&lt;iq to='users.jabber.org' type='get' id='5' xml:lang='de'&gt;
  &lt;query xmlns='jabber:iq:search'/&gt;
&lt;/iq&gt; </pre></div>
		<p class="" style="">
			A more sophisticated component supporting multiple localizations of its forms/messages could now honor the requested language and send this search form instead of the English one shown previously:
		</p>
		<p class="caption"><a name="example-6" id="example-6"></a>Example 6. Search form in German</p><div class="indent"><pre>
&lt;iq from='users.jabber.org' type='result' id='5' xml:lang='de'&gt;
  &lt;query xmlns='jabber:iq:search'&gt;
    &lt;instructions&gt;
        Füllen Sie ein Feld aus um nach einem beliebigen 
        passenden Jabber-Benutzer zu suchen.
    &lt;/instructions&gt;
    &lt;nick/&gt;
    &lt;first/&gt;
    &lt;last/&gt;
    &lt;email/&gt;

    &lt;x xmlns='jabber:x:data'&gt;
      &lt;instructions&gt;
          Um nach einem Benutzer zu suchen, füllen Sie mindestens eines 
          der folgenden Felder aus und schicken dann das Formular ab.
      &lt;/instructions&gt;
      &lt;field type='text-single' label='Vorname' var='first'/&gt;
      &lt;field type='text-single' label='Nachname' var='last'/&gt;
      &lt;field type='text-single' label='Spitzname' var='nick'/&gt;
      &lt;field type='text-single' label='Email' var='email'/&gt;
    &lt;/x&gt;
  &lt;/query&gt;
&lt;/iq&gt; </pre></div>
		<p class="" style="">
			If the component doesn't have the requested localization available, it replies with the default localization (but of course with the matching xml:lang attribute tagged to it, and not the one of the request).
     	</p>
     
	</div>
<hr /><h2><a name="notes" id="notes"></a>Notes</h2><div class="indent"><p><a name="nt-id2260671" id="nt-id2260671">1</a>. RFC 3920: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a href="http://tools.ietf.org/html/rfc3920">http://tools.ietf.org/html/rfc3920</a>&gt;.</p><p><a name="nt-id2252630" id="nt-id2252630">2</a>. XEP-0004: Data Forms &lt;<a href="http://www.xmpp.org/extensions/xep-0004.html">http://www.xmpp.org/extensions/xep-0004.html</a>&gt;.</p></div><hr /><h2><a name="revs" id="revs"></a>Revision History</h2><div class="indent"><h4>Version 0.2 (2003-11-05)</h4><div class="indent">The status of this document has been changed to Retracted since it has been superseded by <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3920">XMPP Core</a></span>  [<a href="#nt-id2260671">1</a>]. (psa)
    </div><h4>Version 0.1 (2002-03-14)</h4><div class="indent">Initial version. (mh)
    </div></div><hr /><p>END</p></body></html>
